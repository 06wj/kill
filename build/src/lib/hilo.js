!function(t){var e=function(){var i=document,n=i.documentElement,r=0;return{getUid:function(t){var e=++r;if(t){var i=t.charCodeAt(t.length-1);return i>=48&&57>=i&&(t+="_"),t+e}return e},viewToString:function(t){for(var e;t;)e=e?t.id+"."+e:t.id,t=t.parent;return e},copy:function(t,e,i){for(var n in e)(!i||t.hasOwnProperty(n)||void 0!==t[n])&&(t[n]=e[n]);return t},browser:function(){var e=navigator.userAgent,e={iphone:/iphone/i.test(e),ipad:/ipad/i.test(e),ipod:/ipod/i.test(e),ios:/iphone|ipad|ipod/i.test(e),android:/android/i.test(e),webkit:/webkit/i.test(e),chrome:/chrome/i.test(e),safari:/safari/i.test(e),firefox:/firefox/i.test(e),ie:/msie/i.test(e),opera:/opera/i.test(e),supportTouch:"ontouchstart"in t,supportCanvas:null!=i.createElement("canvas").getContext,supportStorage:!1,supportOrientation:"orientation"in t,supportDeviceMotion:"ondevicemotion"in t};try{localStorage.setItem("hilo","hilo"),localStorage.removeItem("hilo"),e.supportStorage=!0}catch(r){}var s=e.jsVendor=e.webkit?"webkit":e.firefox?"Moz":e.opera?"O":e.ie?"ms":"",a=e.cssVendor="-"+s+"-",o=i.createElement("div"),h=o.style,l=void 0!=h[s+"Transform"];return(s=void 0!=h[s+"Perspective"])&&(o.id="test3d",h=i.createElement("style"),h.textContent="@media ("+a+"transform-3d){#test3d{height:3px}}",i.head.appendChild(h),n.appendChild(o),s=3==o.offsetHeight,i.head.removeChild(h),n.removeChild(o)),e.supportTransform=l,e.supportTransform3D=s,e}(),event:function(){var e="ontouchstart"in t;return{POINTER_START:e?"touchstart":"mousedown",POINTER_MOVE:e?"touchmove":"mousemove",POINTER_END:e?"touchend":"mouseup"}}(),align:{TOP_LEFT:"TL",TOP:"T",TOP_RIGHT:"TR",LEFT:"L",CENTER:"C",RIGHT:"R",BOTTOM_LEFT:"BL",BOTTOM:"B",BOTTOM_RIGHT:"BR"},getElementRect:function(e){try{var i=e.getBoundingClientRect()}catch(r){i={top:e.offsetTop,left:e.offsetLeft,width:e.offsetWidth,height:e.offsetHeight}}var s=(t.pageXOffset||n.scrollLeft)-(n.clientLeft||0)||0,a=(t.pageYOffset||n.scrollTop)-(n.clientTop||0)||0,o=t.getComputedStyle?getComputedStyle(e):e.currentStyle,h=parseInt;e=h(o.paddingLeft)+h(o.borderLeftWidth)||0;var l=h(o.paddingTop)+h(o.borderTopWidth)||0,c=h(o.paddingRight)+h(o.borderRightWidth)||0,o=h(o.paddingBottom)+h(o.borderBottomWidth)||0,h=i.top||0,u=i.left||0;return{left:u+s+e,top:h+a+l,width:i.right-c-u-e,height:i.bottom-o-h-l}},createElement:function(t,e){var n,r,s,a=i.createElement(t);for(n in e)if(r=e[n],"style"===n)for(s in r)a.style[s]=r[s];else a[n]=r;return a},getElement:function(t){return i.getElementById(t)},setElementStyleByView:function(t){var i=t.drawable,n=i.domElement.style,r=t._stateCache||(t._stateCache={}),s=e.browser.jsVendor,a=!1;this.cacheStateIfChanged(t,["visible"],r)&&(n.display=t.visible?"":"none"),this.cacheStateIfChanged(t,["alpha"],r)&&(n.opacity=t.alpha),!t.visible||0>=t.alpha||(this.cacheStateIfChanged(t,["width"],r)&&(n.width=t.width+"px"),this.cacheStateIfChanged(t,["height"],r)&&(n.height=t.height+"px"),this.cacheStateIfChanged(t,["depth"],r)&&(n.zIndex=t.depth+1),(a=this.cacheStateIfChanged(t,["pivotX","pivotY"],r))&&(n[s+"TransformOrigin"]=t.pivotX+"px "+t.pivotY+"px"),(this.cacheStateIfChanged(t,["x","y","rotation","scaleX","scaleY"],r)||a)&&(n[s+"Transform"]=this.getTransformCSS(t)),this.cacheStateIfChanged(t,["background"],r)&&(n.backgroundColor=t.background),n.pointerEvents||(n.pointerEvents="none"),(a=i.image)&&(a=a.src,a!==r.image&&(r.image=a,n.backgroundImage="url("+a+")"),(a=i.rect)&&(i=a[0],a=a[1],i!==r.sx&&(r.sx=i,n.backgroundPositionX=-i+"px"),a!==r.sy&&(r.sy=a,n.backgroundPositionY=-a+"px"))),(t=t.mask)&&(i=t.drawable.domElement.style.backgroundImage,i!==r.maskImage&&(r.maskImage=i,n[s+"MaskImage"]=i,n[s+"MaskRepeat"]="no-repeat"),i=t.x,t=t.y,(i!==r.maskX||t!==r.maskY)&&(r.maskX=i,r.maskY=t,n[s+"MaskPosition"]=i+"px "+t+"px")))},cacheStateIfChanged:function(t,e,i){var n,r,s,a,o=!1;for(n=0,r=e.length;r>n;n++)s=e[n],a=t[s],a!=i[s]&&(i[s]=a,o=!0);return o},getTransformCSS:function(t){var e=this.browser.supportTransform3D,i=e?"3d":"";return"translate"+i+"("+(t.x-t.pivotX)+"px, "+(t.y-t.pivotY)+(e?"px, 0px)":"px)")+"rotate"+i+(e?"(0, 0, 1, ":"(")+t.rotation+"deg)scale"+i+"("+t.scaleX+", "+t.scaleY+(e?", 1)":")")}}}(),i=function(){var t=function(t){var i,r,s={};for(i in t)r=t[i],e.hasOwnProperty(i)?e[i].call(this,r):s[i]=r;n(this.prototype,s)},e={Extends:function(t){var e=this.prototype,r=i(t.prototype);n(this,t),n(r,e),r.constructor=this,this.prototype=r,this.superclass=t.prototype},Mixes:function(t){t instanceof Array||(t=[t]);for(var e,i=this.prototype;e=t.shift();)n(i,e.prototype||e)},Statics:function(t){n(this,t)}},i=function(){if(Object.__proto__)return function(t){return{__proto__:t}};var t=function(){};return function(e){return t.prototype=e,new t}}(),n=function(t){for(var e=1,i=arguments.length;i>e;e++){var n,r,a=arguments[e];for(r in a){var o=a[r];!o||"object"!=typeof o||void 0===o.value&&"function"!=typeof o.get&&"function"!=typeof o.set?t[r]=o:(n=n||{},n[r]=o)}n&&s(t,n)}return t};try{var r=Object.defineProperty,s=Object.defineProperties;r({},"$",{value:0})}catch(a){"__defineGetter__"in Object&&(r=function(t,e,i){return"value"in i&&(t[e]=i.value),"get"in i&&t.__defineGetter__(e,i.get),"set"in i&&t.__defineSetter__(e,i.set),t},s=function(t,e){for(var i in e)e.hasOwnProperty(i)&&r(t,i,e[i]);return t})}return{create:function(e){e=e||{};var i=e.hasOwnProperty("constructor")?e.constructor:function(){};return t.call(i,e),i},mix:n}}(),n={_listeners:null,on:function(t,e,i){var n=this._listeners=this._listeners||{};t=n[t]=n[t]||[];for(var n=0,r=t.length;r>n;n++)if(t[n].listener===e)return;return t.push({listener:e,once:i}),this},off:function(t,e){if(0==arguments.length)return this._listeners=null,this;var i=this._listeners&&this._listeners[t];if(i){if(1==arguments.length)return delete this._listeners[t],this;for(var n=0,r=i.length;r>n;n++)if(i[n].listener===e){i.splice(n,1),0===i.length&&delete this._listeners[t];break}}return this},fire:function(t,e){var i,n;"string"==typeof t?n=t:(i=t,n=t.type);var s=this._listeners;if(!s)return!1;var a=s[n];if(a){if(a=a.slice(0),i=i||new r(n,this,e),i._stopped)return!1;for(var o=0;o<a.length;o++){var h=a[o];h.listener.call(this,i),h.once&&a.splice(o--,1)}return 0==a.length&&delete s[n],!0}return!1}},r=i.create({constructor:function(t,e,i){this.type=t,this.target=e,this.detail=i,this.timeStamp=+new Date},type:null,target:null,detail:null,timeStamp:0,stopImmediatePropagation:function(){this._stopped=!0}}),s=t.Event;if(s){var s=s.prototype,a=s.stopImmediatePropagation;s.stopImmediatePropagation=function(){a&&a.call(this),this._stopped=!0}}var o=i.create({constructor:function(t){t=t||{},e.copy(this,t,!0)},canvas:null,stage:null,startDraw:function(){},draw:function(){},endDraw:function(){},transform:function(){},hide:function(){},remove:function(){},clear:function(){},resize:function(){}}),h=i.create({Extends:o,constructor:function(t){h.superclass.constructor.call(this,t),this.context=this.canvas.getContext("2d")},context:null,startDraw:function(t){return t.visible&&0<t.alpha?(t===this.stage&&this.context.clearRect(0,0,t.width,t.height),this.context.save(),!0):!1},draw:function(t){var e=this.context,i=t.width,n=t.height,r=t.background;r&&(e.fillStyle=r,e.fillRect(0,0,i,n));var s=t.drawable;if(r=s&&s.image){var s=s.rect,a=s[2],o=s[3],h=s[4],l=s[5];0!==a&&0!==o&&(i||n||(i=t.width=a,n=t.height=o),(h||l)&&e.translate(h-.5*a,l-.5*o),e.drawImage(r,s[0],s[1],a,o,0,0,i,n))}},endDraw:function(){this.context.restore()},transform:function(t){var i=t.drawable;if(i&&i.domElement)e.setElementStyleByView(t);else{var i=this.context,n=t.scaleX,r=t.scaleY;if(t===this.stage){var s=this.canvas.style,a=t._scaleX,o=t._scaleY;(!a&&1!=n||a&&a!=n)&&(t._scaleX=n,s.width=n*t.width+"px"),(!o&&1!=r||o&&o!=r)&&(t._scaleY=r,s.height=r*t.height+"px")}else{var s=t.x,a=t.y,o=t.pivotX,h=t.pivotY,l=t.rotation%360,c=t.mask;if(c&&(c._render(this),i.clip()),c=t.align)if("function"==typeof c)t.align();else{var u=t.parent;if(u){var d=t.width,f=t.height,p=u.width,u=u.height;switch(c){case"TL":a=s=0;break;case"T":s=p-d>>1,a=0;break;case"TR":s=p-d,a=0;break;case"L":s=0,a=u-f>>1;break;case"C":s=p-d>>1,a=u-f>>1;break;case"R":s=p-d,a=u-f>>1;break;case"BL":s=0,a=u-f;break;case"B":s=p-d>>1,a=u-f;break;case"BR":s=p-d,a=u-f}}}0==s&&0==a||i.translate(s,a),0!=l&&i.rotate(l*Math.PI/180),1==n&&1==r||i.scale(n,r),0==o&&0==h||i.translate(-o,-h)}0<t.alpha&&(i.globalAlpha*=t.alpha)}},remove:function(t){if(t=(t=t.drawable)&&t.domElement){var e=t.parentNode;e&&e.removeChild(t)}},clear:function(t,e,i,n){this.context.clearRect(t,e,i,n)},resize:function(t,e){this.canvas.width=t,this.canvas.height=e}}),l=function(){function t(t,i){var n=t.tagName||"div",r=i.image,s=t.width||r&&r.width,a=t.height||r&&r.height,o=e.createElement(n),h=o.style;return t.id&&(o.id=t.id),h.position="absolute",h.left=(t.left||0)+"px",h.top=(t.top||0)+"px",h.width=s+"px",h.height=a+"px","canvas"==n?(o.width=s,o.height=a,r&&(n=o.getContext("2d"),s=i.rect||[0,0,s,a],n.drawImage(r,s[0],s[1],s[2],s[3],t.x||0,t.y||0,t.width||s[2],t.height||s[3]))):(h.opacity=void 0!=t.alpha?t.alpha:1,(t===this.stage||t.clipChildren)&&(h.overflow="hidden"),r&&r.src&&(h.backgroundImage="url("+r.src+")",h.backgroundPosition=-(t.rectX||0)+"px "+-(t.rectY||0)+"px")),o}return i.create({Extends:o,constructor:function(t){l.superclass.constructor.call(this,t)},startDraw:function(e){var i=e.drawable=e.drawable||new u;return i.domElement=i.domElement||t(e,i),!0},draw:function(t){var e=t.parent,i=t.drawable.domElement,n=i.parentNode;e?(t=e.drawable.domElement,t!=n&&t.appendChild(i)):t!==this.stage||n||(i.style.overflow="hidden",this.canvas.appendChild(i))},transform:function(t){if(e.setElementStyleByView(t),t===this.stage){var i=this.canvas.style,n=t._scaleX,r=t._scaleY,s=t.scaleX,a=t.scaleY;(!n&&1!=s||n&&n!=s)&&(t._scaleX=s,i.width=s*t.width+"px"),(!r&&1!=a||r&&r!=a)&&(t._scaleY=a,i.height=a*t.height+"px")}},remove:function(t){if(t=(t=t.drawable)&&t.domElement){var e=t.parentNode;e&&e.removeChild(t)}},hide:function(t){(t=t.drawable&&t.drawable.domElement)&&(t.style.display="none")},resize:function(t,e){var i=this.canvas.style;i.width=t+"px",i.height=e+"px","absolute"!=i.position&&(i.position="relative")}})}(),c=i.create({constructor:function(t,e,i,n,r,s){this.a=t,this.b=e,this.c=i,this.d=n,this.tx=r,this.ty=s},concat:function(t){var e=arguments,i=this.a,n=this.b,r=this.c,s=this.d,a=this.tx,o=this.ty;if(6<=e.length)var h=e[0],l=e[1],c=e[2],u=e[3],d=e[4],e=e[5];else h=t.a,l=t.b,c=t.c,u=t.d,d=t.tx,e=t.ty;return this.a=i*h+n*c,this.b=i*l+n*u,this.c=r*h+s*c,this.d=r*l+s*u,this.tx=a*h+o*c+d,this.ty=a*l+o*u+e,this},rotate:function(t){var e=Math.sin(t);t=Math.cos(t);var i=this.a,n=this.b,r=this.c,s=this.d,a=this.tx,o=this.ty;return this.a=i*t-n*e,this.b=i*e+n*t,this.c=r*t-s*e,this.d=r*e+s*t,this.tx=a*t-o*e,this.ty=a*e+o*t,this},scale:function(t,e){return this.a*=t,this.d*=e,this.c*=t,this.b*=e,this.tx*=t,this.ty*=e,this},translate:function(t,e){return this.tx+=t,this.ty+=e,this},identity:function(){return this.a=this.d=1,this.b=this.c=this.tx=this.ty=0,this},invert:function(){var t=this.a,e=this.b,i=this.c,n=this.d,r=this.tx,s=t*n-e*i;return this.a=n/s,this.b=-e/s,this.c=-i/s,this.d=t/s,this.tx=(i*this.ty-n*r)/s,this.ty=-(t*this.ty-e*r)/s,this},transformPoint:function(t,e,i){var n=t.x*this.a+t.y*this.c+this.tx,r=t.x*this.b+t.y*this.d+this.ty;return e&&(n=n+.5>>0,r=r+.5>>0),i?{x:n,y:r}:(t.x=n,t.y=r,t)}}),u=i.create({constructor:function(t){this.init(t)},image:null,rect:null,init:function(t){var i=this,n=i.image;if(u.isDrawable(t)?i.image=t:e.copy(i,t,!0),t=i.image,"string"==typeof t){if(!n||t!==n.getAttribute("src")){i.image=null;var r=new Image;return r.onload=function(){r.onload=null,i.init(r)},r.src=t,void 0}t=i.image=n}t&&!i.rect&&(i.rect=[0,0,t.width,t.height])},Statics:{isDrawable:function(t){return t&&t.tagName?(t=t.tagName.toLowerCase(),"img"===t||"canvas"===t||"video"===t):!1}}}),d=function(){function t(t,e,i){for(var n,r,s,a,o,h,l=t.length,c=e.length,u=0,d=n=0;l>d;d++){n=t[d],r=t[l-1>d?d+1:0],u=n.y-r.y,n=r.x-n.x,r=Math.sqrt(u*u+n*n),u/=r,n/=r,r=s=t[0].x*u+t[0].y*n;for(var f=1;l>f;f++)h=t[f].x*u+t[f].y*n,h>s?s=h:r>h&&(r=h);for(a=o=e[0].x*u+e[0].y*n,f=1;c>f;f++)h=e[f].x*u+e[f].y*n,h>o?o=h:a>h&&(a=h);if(a>r?(r=a-s,u=-u,n=-n):r-=o,r>=0)return!1;r>i.overlap&&(i.overlap=r,i.normal.x=u,i.normal.y=n)}return i}return i.create({Mixes:n,constructor:function(t){t=t||{},this.id=this.id||t.id||e.getUid("View"),e.copy(this,t,!0)},id:null,x:0,y:0,width:0,height:0,alpha:1,rotation:0,visible:!0,pivotX:0,pivotY:0,scaleX:1,scaleY:1,pointerEnabled:!0,background:null,mask:null,align:null,drawable:null,boundsArea:null,parent:null,depth:-1,getStage:function(){for(var t,e=this;t=e.parent;)e=t;return e.canvas?e:null},getScaledWidth:function(){return this.width*this.scaleX},getScaledHeight:function(){return this.height*this.scaleY},addTo:function(t,e){return"number"==typeof e?t.addChildAt(this,e):t.addChild(this),this},removeFromParent:function(){var t=this.parent;return t&&t.removeChild(this),this},getBounds:function(){for(var t,e,i,n,r,s,a,o=this.width,h=this.height,l=this.getConcatenatedMatrix(),o=this.boundsArea||[{x:0,y:0},{x:o,y:0},{x:o,y:h},{x:0,y:h}],h=[],c=0,u=o.length;u>c;c++)t=l.transformPoint(o[c],!0,!0),e=t.x,i=t.y,0==c?(n=r=e,s=a=i):(n>e?n=e:e>r&&(r=e),s>i?s=i:i>a&&(a=i)),h[c]=t;return h.x=n,h.y=s,h.width=r-n,h.height=a-s,h},getConcatenatedMatrix:function(t){for(var e=new c(1,0,0,1,0,0),i=this;i!=t&&i.parent;i=i.parent){var n=1,r=0,s=i.rotation%360,a=i.pivotX,o=i.pivotY,h=i.scaleX,l=i.scaleY;s&&(r=s*Math.PI/180,n=Math.cos(r),r=Math.sin(r)),0!=a&&(e.tx-=a),0!=o&&(e.ty-=o),e.concat(n*h,r*h,-r*l,n*l,i.x,i.y)}return e},hitTestPoint:function(t,e,i){var n=this.getBounds(),r=t>=n.x&&t<=n.x+n.width&&e>=n.y&&e<=n.y+n.height;if(r&&i){i=0;for(var s,a,o,h,r=!1,l=0,c=n.length;c>l;l++){var u=n[l],d=n[(l+1)%c];if(u.y==d.y&&e==u.y&&(u.x>d.x?(s=d.x,a=u.x):(s=u.x,a=d.x),t>=s&&a>=t))r=!0;else if(u.y>d.y?(o=d.y,h=u.y):(o=u.y,h=d.y),!(o>e||e>h)){var f=(e-u.y)*(d.x-u.x)/(d.y-u.y)+u.x;f>t?i++:f==t&&(r=!0),u.x>t&&u.y==e&&(u=n[(c+l-1)%c],(u.y<e&&d.y>e||u.y>e&&d.y<e)&&i++)}}r=r||1==i%2}return r},hitTestObject:function(e,i){var n=this.getBounds(),r=e.getBounds(),s=n.x<=r.x+r.width&&r.x<=n.x+n.width&&n.y<=r.y+r.height&&r.y<=n.y+n.height;return s&&i&&(s=(s=t(n,r,{overlap:-1/0,normal:{x:0,y:0}}))?t(r,n,s):!1),!!s},_render:function(t,e){this.onUpdate&&!1===this.onUpdate(e)||!t.startDraw(this)||(t.transform(this),this.render(t,e),t.endDraw(this))},_fireMouseEvent:function(t){if(t.eventCurrentTarget=this,this.fire(t),"mousemove"==t.type){if(!this.__mouseOver){this.__mouseOver=!0;var i=e.copy({},t);i.type="mouseover",this.fire(i)}}else"mouseout"==t.type&&(this.__mouseOver=!1);i=this.parent,t._stopped||t._stopPropagationed||!i||("mouseout"==t.type||"touchout"==t.type?i.hitTestPoint(t.stageX,t.stageY,!0)||i._fireMouseEvent(t):i._fireMouseEvent(t))},onUpdate:null,render:function(t){t.draw(this)},toString:function(){return e.viewToString(this)}})}(),f=i.create({Extends:d,constructor:function(t){t=t||{},this.id=this.id||t.id||e.getUid("Container"),f.superclass.constructor.call(this,t),this.children?this._updateChildren():this.children=[]},children:null,pointerChildren:!0,clipChildren:!1,getNumChildren:function(){return this.children.length},addChildAt:function(t,e){var i=this.children,n=i.length,r=t.parent;e=0>e?0:e>n?n:e;var s=this.getChildIndex(t);return s==e?this:(s>=0?(i.splice(s,1),e=e==n?n-1:e):r&&r.removeChild(t),i.splice(e,0,t),0>s?this._updateChildren(e):this._updateChildren(e>s?s:e,(e>s?e:s)+1),this)},addChild:function(){for(var t=this.children.length,e=arguments,i=0,n=e.length;n>i;i++)this.addChildAt(e[i],t+i);return this},removeChildAt:function(t){var e=this.children;if(0>t||t>=e.length)return null;var i=e[t];if(i){if(!i.__renderer)for(var n=i;n=n.parent;){if(n.renderer){i.__renderer=n.renderer;break}if(n.__renderer){i.__renderer=n.__renderer;break}}i.__renderer&&i.__renderer.remove(i),i.parent=null,i.depth=-1}return e.splice(t,1),this._updateChildren(t),i},removeChild:function(t){return this.removeChildAt(this.getChildIndex(t))},removeChildById:function(t){for(var e,i=this.children,n=0,r=i.length;r>n;n++)if(e=i[n],e.id===t)return this.removeChildAt(n),e;return null},removeAllChildren:function(){for(;this.children.length;)this.removeChildAt(0);return this},getChildAt:function(t){var e=this.children;return 0>t||t>=e.length?null:e[t]},getChildById:function(t){for(var e,i=this.children,n=0,r=i.length;r>n;n++)if(e=i[n],e.id===t)return e;return null},getChildIndex:function(t){return this.children.indexOf(t)},setChildIndex:function(t,e){var i=this.children,n=i.indexOf(t);if(n>=0&&n!=e){var r=i.length;e=0>e?0:e>=r?r-1:e,i.splice(n,1),i.splice(e,0,t),this._updateChildren()}return this},swapChildren:function(t,e){var i=this.children,n=this.getChildIndex(t),r=this.getChildIndex(e);t.depth=r,i[r]=t,e.depth=n,i[n]=e},swapChildrenAt:function(t,e){var i=this.children,n=this.getChildAt(t),r=this.getChildAt(e);n.depth=e,i[e]=n,r.depth=t,i[t]=r},sortChildren:function(t){var e=this.children;if("string"==typeof t){var i=t;t=function(t,e){return e[i]-t[i]}}e.sort(t),this._updateChildren()},_updateChildren:function(t,e){var i,n=this.children;e=e||n.length;for(var r=t||0;e>r;r++)i=n[r],i.depth=r+1,i.parent=this},contains:function(t){for(;t=t.parent;)if(t===this)return!0;return!1},getViewAtPoint:function(t,e,i,n,r){for(var s,a,o=n?[]:null,h=this.children,l=h.length-1;l>=0;l--)if(s=h[l],!(!s||!s.visible||0>=s.alpha||r&&!s.pointerEnabled))if(s.children&&s.children.length&&(!r||s.pointerChildren)&&(a=s.getViewAtPoint(t,e,i,n,r)),a){if(!n)return a;a.length&&(o=o.concat(a))}else if(s.hitTestPoint(t,e,i)){if(!n)return s;o.push(s)}return n&&o.length?o:null},render:function(t,e){f.superclass.render.call(this,t,e);var i,n,r,s=this.children.slice(0);for(i=0,n=s.length;n>i;i++)r=s[i],r.parent===this&&r._render(t,e)}}),p=i.create({Extends:f,constructor:function(t){t=t||{},this.id=this.id||t.id||e.getUid("Stage"),p.superclass.constructor.call(this,t),this._initRenderer(t);var i=this.width,n=this.height,r=this.updateViewport();t.width||(i=r&&r.width||320),t.height||(n=r&&r.height||480),this.resize(i,n,!0)},canvas:null,renderer:null,paused:!1,viewport:null,_initRenderer:function(t){var i=this.canvas;"string"==typeof i&&(i=e.getElement(i)),t=t.container,"string"==typeof t&&(t=e.getElement(t)),i||(i=e.createElement("canvas",{style:{position:"absolute"}})),this.canvas=i,t&&t.appendChild(i),t={canvas:i,stage:this},this.renderer=i.getContext?new h(t):new l(t)},addTo:function(t){var e=this.canvas;return e.parentNode!==t&&t.appendChild(e),this},tick:function(t){this.paused||this._render(this.renderer,t)},enableDOMEvent:function(t,e){var i=this,n=i.canvas,r="string"==typeof t?[t]:t;e=!1!==e;for(var s=i._domListener||(i._domListener=function(t){i._onDOMEvent(t)}),a=0;a<r.length;a++)t=r[a],e?n.addEventListener(t,s,!1):n.removeEventListener(t,s);return i},_onDOMEvent:function(t){var i=t.type,n=0==i.indexOf("touch"),r=t;if(n)var s=t.touches,r=t.changedTouches,r=s&&s.length?s[0]:r&&r.length?r[0]:null;var s=r.pageX||r.clientX,r=r.pageY||r.clientY,a=this.viewport||this.updateViewport();t.stageX=s=(s-a.left)/this.scaleX,t.stageY=r=(r-a.top)/this.scaleY,t.stopPropagation=function(){this._stopPropagationed=!0};var s=this.getViewAtPoint(s,r,!0,!1,!0)||this,r=this.canvas,a=this._eventTarget,o="mouseout"===i;if(a&&(!(a==s||a.contains&&a.contains(s))||o)){if(o="touchmove"===i?"touchout":"mousemove"===i||o||!s?"mouseout":null){var h=e.copy({},t);h.type=o,h.eventTarget=a,a._fireMouseEvent(h)}t.lastEventTarget=a,this._eventTarget=null}s&&s.pointerEnabled&&"mouseout"!==i&&(t.eventTarget=this._eventTarget=s,s._fireMouseEvent(t)),n||(r.style.cursor=s&&s.pointerEnabled&&s.useHandCursor?"pointer":""),e.browser.android&&"touchmove"===i&&t.preventDefault()},updateViewport:function(){var t=this.canvas,i=null;return t.parentNode&&(i=this.viewport=e.getElementRect(t)),i},resize:function(t,e,i){(i||this.width!==t||this.height!==e)&&(this.width=t,this.height=e,this.renderer.resize(t,e),this.updateViewport())}}),m=i.create({Extends:d,constructor:function(t){t=t||{},this.id=this.id||t.id||e.getUid("Bitmap"),m.superclass.constructor.call(this,t),this.drawable=new u(t),this.width&&this.height||(t=this.drawable.rect)&&(this.width=t[2],this.height=t[3])},setImage:function(t,e){return this.drawable.init({image:t,rect:e}),e&&(this.width=e[2],this.height=e[3]),this}}),g=i.create({Extends:d,constructor:function(t){t=t||{},this.id=this.id||t.id||e.getUid("Sprite"),g.superclass.constructor.call(this,t),this._frames=[],this._frameNames={},this.drawable=new u,t.frames&&this.addFrame(t.frames)},_frames:null,_frameNames:null,_frameElapsed:0,_firstRender:!0,paused:!1,loop:!0,timeBased:!1,interval:1,currentFrame:0,getNumFrames:function(){return this._frames?this._frames.length:0},addFrame:function(t,e){var i=null!=e?e:this._frames.length;if(t instanceof Array)for(var n=0,r=t.length;r>n;n++)this.setFrame(t[n],i+n);else this.setFrame(t,i);return this},setFrame:function(t,e){var i=this._frames,n=i.length;return e=0>e?0:e>n?n:e,i[e]=t,t.name&&(this._frameNames[t.name]=t),(0==e&&!this.width||!this.height)&&(this.width=t.rect[2],this.height=t.rect[3]),this},getFrame:function(t){if("number"==typeof t){var e=this._frames;return 0>t||t>=e.length?null:e[t]}return this._frameNames[t]},getFrameIndex:function(t){var e=this._frames,i=e.length,n=-1;if("number"==typeof t)n=t;else if(t="string"==typeof t?this._frameNames[t]:t)for(var r=0;i>r;r++)if(t===e[r]){n=r;break}return n},play:function(){return this.paused=!1,this},stop:function(){return this.paused=!0,this},"goto":function(t,e){var i=this._frames.length,n=this.getFrameIndex(t);return this.currentFrame=0>n?0:n>=i?i-1:n,this.paused=e,this._firstRender=!0,this},_render:function(t,e){var i,n=this.currentFrame;this._firstRender?(i=n,this._firstRender=!1):i=this._nextFrame(e),i!=n&&(this.currentFrame=i,(n=this._frames[i].callback)&&n.call(this)),this.onEnterFrame&&this.onEnterFrame(i),this.drawable.init(this._frames[i]),g.superclass._render.call(this,t,e)},_nextFrame:function(t){var e=this._frames,i=e.length,n=this.currentFrame,e=e[n],r=this._frameElapsed;return t=0!=n||this.drawable?r+(this.timeBased?t:1):0,r=this._frameElapsed=t<(e.duration||this.interval)?t:0,(e.stop||!this.loop&&n>=i-1)&&this.stop(),this.paused||0!=r||(null!=e.next?n=this.getFrameIndex(e.next):n>=i-1?n=0:this.drawable&&n++),n},setFrameCallback:function(t,e){return(t=this.getFrame(t))&&(t.callback=e),this},onEnterFrame:null}),v=i.create({Extends:d,constructor:function(t){t=t||{},this.id=this.id||t.id||e.getUid("DOMElement"),v.superclass.constructor.call(this,t),this.drawable=new u,(this.drawable.domElement=t.element||e.createElement("div")).id=this.id},_render:function(t,e){this.onUpdate&&!1===this.onUpdate(e)||(t.transform(this),this.visible&&0<this.alpha&&this.render(t,e))},render:function(t){var e=t.canvas;if(e.getContext){var i,n=this.depth,r=e.nextSibling;if(!this.drawable.domElement.parentNode){for(;r&&3!=r.nodeType&&(i=parseInt(r.style.zIndex)||0,!(0>=i||i>n));)r=r.nextSibling;e.parentNode.insertBefore(this.drawable.domElement,r)}}else t.draw(this)}}),_=function(){var t=document.createElement("canvas"),n=t.getContext&&t.getContext("2d");return i.create({Extends:d,constructor:function(t){t=t||{},this.id=this.id||t.id||e.getUid("Graphics"),_.superclass.constructor.call(this,t),this._actions=[],this._cache=null},lineWidth:1,lineAlpha:1,lineCap:null,lineJoin:null,miterLimit:10,hasStroke:!1,strokeStyle:"0",hasFill:!1,fillStyle:"0",fillAlpha:0,lineStyle:function(t,e,i,n,r,s){var a=this._addAction;return a.call(this,["lineWidth",this.lineWidth=t||1]),a.call(this,["strokeStyle",this.strokeStyle=e||"0"]),a.call(this,["lineAlpha",this.lineAlpha=i||1]),void 0!=n&&a.call(this,["lineCap",this.lineCap=n]),void 0!=r&&a.call(this,["lineJoin",this.lineJoin=r]),void 0!=s&&a.call(this,["miterLimit",this.miterLimit=s]),this.hasStroke=!0,this},beginFill:function(t,e){var i=this._addAction;return i.call(this,["fillStyle",this.fillStyle=t]),i.call(this,["fillAlpha",this.fillAlpha=e||1]),this.hasFill=!0,this},endFill:function(){var t=this._addAction;return this.hasStroke&&t.call(this,["stroke"]),this.hasFill&&t.call(this,["fill"]),this},beginLinearGradientFill:function(t,e,i,r,s,a){for(t=n.createLinearGradient(t,e,i,r),e=0,i=s.length;i>e;e++)t.addColorStop(a[e],s[e]);return this.hasFill=!0,this._addAction(["fillStyle",this.fillStyle=t])},beginRadialGradientFill:function(t,e,i,r,s,a,o,h){for(t=n.createRadialGradient(t,e,i,r,s,a),e=0,i=o.length;i>e;e++)t.addColorStop(h[e],o[e]);return this.hasFill=!0,this._addAction(["fillStyle",this.fillStyle=t])},beginBitmapFill:function(t,e){var i=n.createPattern(t,e||"");return this.hasFill=!0,this._addAction(["fillStyle",this.fillStyle=i])},beginPath:function(){return this._addAction(["beginPath"])},closePath:function(){return this._addAction(["closePath"])},moveTo:function(t,e){return this._addAction(["moveTo",t,e])},lineTo:function(t,e){return this._addAction(["lineTo",t,e])},quadraticCurveTo:function(t,e,i,n){return this._addAction(["quadraticCurveTo",t,e,i,n])},bezierCurveTo:function(t,e,i,n,r,s){return this._addAction(["bezierCurveTo",t,e,i,n,r,s])},drawRect:function(t,e,i,n){return this._addAction(["rect",t,e,i,n])},drawRoundRectComplex:function(t,e,i,n,r,s,a,o){var h=this._addAction;return h.call(this,["moveTo",t+r,e]),h.call(this,["lineTo",t+i-s,e]),h.call(this,["arc",t+i-s,e+s,s,-Math.PI/2,0,!1]),h.call(this,["lineTo",t+i,e+n-a]),h.call(this,["arc",t+i-a,e+n-a,a,0,Math.PI/2,!1]),h.call(this,["lineTo",t+o,e+n]),h.call(this,["arc",t+o,e+n-o,o,Math.PI/2,Math.PI,!1]),h.call(this,["lineTo",t,e+r]),h.call(this,["arc",t+r,e+r,r,Math.PI,3*Math.PI/2,!1]),this},drawRoundRect:function(t,e,i,n,r){return this.drawRoundRectComplex(t,e,i,n,r,r,r,r)},drawCircle:function(t,e,i){return this._addAction(["arc",t+i,e+i,i,0,2*Math.PI,0])},drawEllipse:function(t,e,i,n){if(i==n)return this.drawCircle(t,e,i);var r=this._addAction;i/=2,n/=2;var s=.5522847498307933*i,a=.5522847498307933*n;return t+=i,e+=n,r.call(this,["moveTo",t+i,e]),r.call(this,["bezierCurveTo",t+i,e-a,t+s,e-n,t,e-n]),r.call(this,["bezierCurveTo",t-s,e-n,t-i,e-a,t-i,e]),r.call(this,["bezierCurveTo",t-i,e+a,t-s,e+n,t,e+n]),r.call(this,["bezierCurveTo",t+s,e+n,t+i,e+a,t+i,e]),this},drawSVGPath:function(t){var e=this._addAction;t=t.split(/,| (?=[a-zA-Z])/),e.call(this,["beginPath"]);for(var i=0,n=t.length;n>i;i++){var r=t[i],s=r[0].toUpperCase(),r=r.substring(1).split(/,| /);switch(0==r[0].length&&r.shift(),s){case"M":e.call(this,["moveTo",r[0],r[1]]);break;case"L":e.call(this,["lineTo",r[0],r[1]]);break;case"C":e.call(this,["bezierCurveTo",r[0],r[1],r[2],r[3],r[4],r[5]]);break;case"Z":e.call(this,["closePath"])}}return this},_draw:function(t){var e,i=this._actions,n=i.length;for(t.beginPath(),e=0;n>e;e++){var r=i[e],s=r[0],a=1<r.length?r.slice(1):null;"function"==typeof t[s]?t[s].apply(t,a):t[s]=r[1]}},render:function(t){if(t.canvas.getContext)this._draw(t.context);else{var e=this.drawable;e.image||(e.image=this.toImage()),t.draw(this)}},cache:function(t){var i=this._cache;return i||(i=this._cache=e.createElement("canvas",{width:this.width,height:this.height}),this._draw(i.getContext("2d"))),t&&(i=this._cache=this.toImage()),i},uncache:function(){this._cache=null},toImage:function(t){var i=this._cache,n=this.width,r=this.height;return i||(i=e.createElement("canvas",{width:n,height:r}),this._draw(i.getContext("2d"))),i instanceof HTMLImageElement||(t=i.toDataURL(t||"image/png"),i=new Image,i.src=t,i.width=n,i.height=r),i},clear:function(){return this._actions.length=0,this._cache=null,this.lineAlpha=this.lineWidth=1,this.lineJoin=this.lineCap=null,this.miterLimit=10,this.hasStroke=!1,this.strokeStyle="0",this.hasFill=!1,this.fillStyle="0",this.fillAlpha=1,this},_addAction:function(t){return this._actions.push(t),this}})}(),y=i.create({Extends:d,constructor:function(t){t=t||{},this.id=this.id||t.id||e.getUid("Text"),y.superclass.constructor.call(this,t),t.font||(this.font="12px arial"),this._fontHeight=y.measureFontHeight(this.font)},text:null,color:"#000",textAlign:null,textVAlign:null,outline:!1,lineSpacing:0,maxWidth:200,font:null,textWidth:0,textHeight:0,setFont:function(t){return this.font!==t&&(this.font=t,this._fontHeight=y.measureFontHeight(t)),this},render:function(t){if(t.canvas.getContext)this._draw(t.context);else{var e=this.drawable.domElement,i=e.style;i.font=this.font,i.textAlign=this.textAlign,i.color=this.color,i.width=this.width+"px",i.height=this.height+"px",i.lineHeight=this._fontHeight+this.lineSpacing+"px",e.innerHTML=this.text,t.draw(this)}},_draw:function(t){var e=this.text.toString();if(e){t.font=this.font,t.textAlign=this.textAlign,t.textBaseline="top";var i,n,r,s=e.split(/\r\n|\r|\n|<br(?:[ \/])*>/),a=0,o=0,h=this._fontHeight+this.lineSpacing,e=[];for(i=0,len=s.length;len>i;i++)if(n=s[i],r=t.measureText(n).width,r<=this.maxWidth)e.push({text:n,y:o}),r>a&&(a=r),o+=h;else{r="";var l,c,u,d=0;for(c=0,wlen=n.length;wlen>c;c++)u=n[c],l=t.measureText(r+u).width,l>this.maxWidth?(e.push({text:r,y:o}),d>a&&(a=d),o+=h,r=u):(d=l,r+=u),c==wlen-1&&(e.push({text:r,y:o}),r!==u&&l>a&&(a=l),o+=h)}switch(this.textWidth=a,this.textHeight=o,this.width||(this.width=a),this.height||(this.height=o),s=0,this.textVAlign){case"middle":s=this.height-this.textHeight>>1;break;case"bottom":s=this.height-this.textHeight}for((i=this.background)&&(t.fillStyle=i,t.fillRect(0,0,this.width,this.height)),this.outline?t.strokeStyle=this.color:t.fillStyle=this.color,i=0;i<e.length;i++)n=e[i],this._drawTextLine(t,n.text,s+n.y)}},_drawTextLine:function(t,e,i){var n=0,r=this.width;switch(this.textAlign){case"center":n=r>>1;break;case"right":case"end":n=r}this.outline?t.strokeText(e,n,i):t.fillText(e,n,i)},Statics:{measureFontHeight:function(t){var i=document.documentElement,n=e.createElement("div",{style:{font:t,position:"absolute"},innerHTML:"M"});return i.appendChild(n),t=n.offsetHeight,i.removeChild(n),t}}}),x=i.create({Extends:f,constructor:function(t){t=t||{},this.id=this.id||t.id||e.getUid("BitmapText"),x.superclass.constructor.call(this,t),(t=t.text+"")&&(this.text="",this.setText(t)),this.pointerChildren=!1},glyphs:null,letterSpacing:0,text:"",textAlign:"left",setText:function(t){t=t.toString();var e=t.length;if(this.text!=t){this.text=t;var i,n,r,s=r=0,a=0;for(i=0;e>i;i++)n=t.charAt(i),(n=this.glyphs[n])&&(a=r+(r>0?this.letterSpacing:0),this.children[i]?(r=this.children[i],r.setImage(n.image,n.rect)):(r=this._createBitmap(n),this.addChild(r)),r.x=a,r=a+n.rect[2],s=Math.max(s,n.rect[3]));for(i=this.children.length-1;i>=e;i--)this._releaseBitmap(this.children[i]),this.children[i].removeFromParent();return this.width=r,this.height=s,this.setTextAlign(),this}},_createBitmap:function(t){var e;return x._pool.length?(e=x._pool.pop(),e.setImage(t.image,t.rect)):e=new m({image:t.image,rect:t.rect}),e},_releaseBitmap:function(t){x._pool.push(t)},setTextAlign:function(t){switch(this.textAlign=t||this.textAlign,this.textAlign){case"center":this.pivotX=.5*this.width;break;case"right":this.pivotX=this.width;break;default:this.pivotX=0}return this},hasGlyphs:function(t){var e=this.glyphs;if(!e)return!1;t=t.toString();var i,n=t.length;for(i=0;n>i;i++)if(!e[t.charAt(i)])return!1;return!0},Statics:{_pool:[],createGlyphs:function(t,e,i,n){var r=t.toString();i=i||r.length;var s=e.width/i;n=e.height/(n||1);var a={},o=0;for(t=t.length;t>o;o++)charStr=r.charAt(o),a[charStr]={image:e,rect:[o%i*s,n*Math.floor(o/i),s,n]};return a}}}),w=i.create({Extends:d,constructor:function(t){t=t||{},this.id=this.id||t.id||e.getUid("Button"),w.superclass.constructor.call(this,t),this.drawable=new u(t),this.setState(w.UP)},upState:null,overState:null,downState:null,disabledState:null,state:null,enabled:!0,useHandCursor:!0,setEnabled:function(t){return this.enabled!=t&&(t?this.setState(w.UP):this.setState(w.DISABLED)),this},setState:function(t){if(this.state!==t){this.state=t,this.pointerEnabled=this.enabled=t!==w.DISABLED;
var i;switch(t){case w.UP:i=this.upState;break;case w.OVER:i=this.overState;break;case w.DOWN:i=this.downState;break;case w.DISABLED:i=this.disabledState}i&&(this.drawable.init(i),e.copy(this,i,!0))}return this},fire:function(t,e){if(this.enabled){switch("string"==typeof t?t:t.type){case"mousedown":case"touchstart":case"touchmove":this.setState(w.DOWN);break;case"mouseover":this.setState(w.OVER);break;case"mouseup":this.overState?this.setState(w.OVER):this.upState&&this.setState(w.UP);break;case"touchend":case"touchout":case"mouseout":this.setState(w.UP)}return w.superclass.fire.call(this,t,e)}},Statics:{UP:"up",OVER:"over",DOWN:"down",DISABLED:"disabled"}}),s=function(){function t(t,e){var i={image:t.image,rect:t.rect};return e&&(i.name=e.name||null,i.duration=e.duration||0,i.stop=!!e.stop,i.next=e.next||null),i}return i.create({constructor:function(e){var i,n=e.frames;if(n){i=[];var r;if(n instanceof Array)for(var s=0,a=n.length;a>s;s++)r=n[s],i[s]={image:e.image,rect:r};else{r=n.frameWidth;for(var a=n.frameHeight,o=e.width/r|0,s=e.height/a|0,n=n.numFrames||o*s,s=0;n>s;s++)i[s]={image:e.image,rect:[s%o*r,(s/o|0)*a,r,a]}}}else i=null;this._frames=i;var h;if(i=this._frames,e=e.sprites){var l,n={};for(h in e){if(s=e[h],"number"==typeof s)r=t(i[s]);else if(s instanceof Array)for(r=[],a=0,o=s.length;o>a;a++){l=s[a];var c;"number"==typeof l?l=t(i[l]):(c=l.rect,"number"==typeof c&&(c=i[l.rect]),l=t(c,l)),r[a]=l}else for(r=[],a=s.from;a<=s.to;a++)r[a-s.from]=t(i[a],s[a]);n[h]=r}h=n}else h=null;this._sprites=h},_frames:null,_sprites:null,getFrame:function(t){var e=this._frames;return e&&e[t]},getSprite:function(t){var e=this._sprites;return e&&e[t]},Statics:{createSpriteFrames:function(t,e,i,n,r,s,a){if("[object Array]"===Object.prototype.toString.call(t)){e=[];for(var o=0,h=t.length;h>o;o++)e=e.concat(this.createSpriteFrames.apply(this,t[o]))}else{if("string"==typeof e){var l=e.split(",");e=[];for(var c=0,u=l.length;u>c;c++)if(h=l[c].split("-"),1==h.length)e.push(parseInt(h[0]));else for(o=parseInt(h[0]),h=parseInt(h[1]);h>=o;o++)e.push(o)}for(l=Math.floor(i.width/n),o=0;o<e.length;o++)c=e[o],e[o]={rect:[c%l*n,r*Math.floor(c/l),n,r],image:i,duration:a};e[0].name=t,s?e[e.length-1].next=t:e[e.length-1].stop=!0}return e}}})}(),b=i.create({constructor:function(t){this._targetFPS=t||30,this._interval=1e3/this._targetFPS,this._tickers=[]},_paused:!1,_targetFPS:0,_interval:0,_intervalId:null,_tickers:null,_lastTime:0,_tickCount:0,_tickTime:0,_measuredFPS:0,start:function(i){if(!this._intervalId){this._lastTime=+new Date;var n=this,r=this._interval,s=t.requestAnimationFrame||t[e.browser.jsVendor+"RequestAnimationFrame"];if(i&&s)var a=function(){n._tick()},o=function(){n._intervalId=setTimeout(o,r),s(a)};else o=function(){n._intervalId=setTimeout(o,r),n._tick()};o()}},stop:function(){clearTimeout(this._intervalId),this._intervalId=null,this._lastTime=0},pause:function(){this._paused=!0},resume:function(){this._paused=!1},_tick:function(){if(!this._paused){var t=+new Date,e=t-this._lastTime,i=this._tickers;++this._tickCount>=this._targetFPS?(this._measuredFPS=1e3/(this._tickTime/this._tickCount)+.5>>0,this._tickTime=this._tickCount=0):this._tickTime+=t-this._lastTime,this._lastTime=t;for(var t=0,n=i.length;n>t;t++)i[t].tick(e)}},getMeasuredFPS:function(){return this._measuredFPS},addTick:function(t){if(!t||"function"!=typeof t.tick)throw Error("Ticker: The tick object must implement the tick method.");this._tickers.push(t)},removeTick:function(t){var e=this._tickers;t=e.indexOf(t),t>=0&&e.splice(t,1)}}),T=Array.prototype,E=T.slice;T.indexOf=T.indexOf||function(t,e){e=e||0;var i,n=this.length;if(0==n||e>=n)return-1;for(0>e&&(e=n+e),i=e;n>i;i++)if(this[i]===t)return i;return-1},T=Function.prototype,T.bind=T.bind||function(t){function e(){var r=n.concat(E.call(arguments));return i.apply(this instanceof e?this:t,r)}var i=this,n=E.call(arguments,1),r=function(){};return r.prototype=i.prototype,e.prototype=new r,e};var S=function(){return i.create({constructor:function(t,e,i,n){this.target=t,this._pausedStartTime=this._pausedTime=this._seekTime=this._startTime=0,this._reverseFlag=1,this._repeatCount=0,3==arguments.length&&(n=i,i=e,e=null);for(var r in n)this[r]=n[r];this.setProps(e,i),!n.duration&&n.time&&(this.duration=n.time||0,this.time=0)},target:null,duration:0,delay:0,paused:!1,loop:!1,reverse:!1,repeat:0,repeatDelay:0,ease:null,time:0,onStart:null,onUpdate:null,onComplete:null,setProps:function(t,e){var i=this.target,n=t||e,r=this._fromProps={},s=this._toProps={};t=t||i,e=e||i;for(var a in n)s[a]=e[a]||0,i[a]=r[a]=t[a]||0;return this},start:function(){return this._startTime=+new Date+this.delay,this._pausedTime=this._seekTime=0,this.paused=!1,S.add(this),this},stop:function(){return S.remove(this),this},pause:function(){return this.paused=!0,this._pausedStartTime=+new Date,this},resume:function(){return this.paused=!1,this._pausedStartTime&&(this._pausedTime+=+new Date-this._pausedStartTime),this._pausedStartTime=0,this},seek:function(t,e){var i=+new Date;return this._startTime=i,this._seekTime=t,this._pausedTime=0,void 0!==e&&(this.paused=e),this._update(i,!0),S.add(this),this},link:function(t){var e=t.delay,i=this._startTime;if("string"==typeof e)var n=0==e.indexOf("+"),r=0==e.indexOf("-"),e=n||r?Number(e.substr(1))*(n?1:-1):Number(e);return t.delay=e,t._startTime=n||r?i+this.duration+e:i+e,this._next=t,S.remove(t),this},_render:function(t){var e,i=this.target,n=this._fromProps;for(e in n)i[e]=n[e]+(this._toProps[e]-n[e])*t},_update:function(t,e){if(!this.paused||e){var i=t-this._startTime-this._pausedTime+this._seekTime;if(!(0>i)){var n,r=i/this.duration,s=!1,r=0>=r?0:r>=1?1:this.ease?this.ease(r):r;this.reverse&&(0>this._reverseFlag&&(r=1-r),1e-7>r&&(0<this.repeat&&this._repeatCount++>=this.repeat||0==this.repeat&&!this.loop?s=!0:(this._startTime=+new Date,this._reverseFlag*=-1))),0==this.time&&(n=this.onStart)&&n.call(this,this),this.time=i,this._render(r),(n=this.onUpdate)&&n.call(this,r,this),r>=1&&(this.reverse?(this._startTime=+new Date,this._reverseFlag*=-1):this.loop||0<this.repeat&&this._repeatCount++<this.repeat?this._startTime=+new Date+this.repeatDelay:s=!0);var a=this._next;if(a&&0>=a.time){var o=a._startTime;o>0&&t>=o?(a._render(r),a.time=i,S.add(a)):s&&(0>o||o>t)&&a.start()}if(s)return(n=this.onComplete)&&n.call(this,this),!0}}},Statics:{_tweens:[],tick:function(){var t,e,i=S._tweens,n=i.length;for(e=0;n>e;e++)(t=i[e])&&t._update(+new Date)&&(i.splice(e,1),e--);return S},add:function(t){var e=S._tweens;return-1==e.indexOf(t)&&e.push(t),S},remove:function(t){if(t instanceof Array){for(var e=0,i=t.length;i>e;e++)S.remove(t[e]);return S}if(i=S._tweens,t instanceof S)e=i.indexOf(t),e>-1&&i.splice(e,1);else for(e=0;e<i.length;e++)i[e].target===t&&(i.splice(e,1),e--);return S},removeAll:function(){return S._tweens.length=0,S},fromTo:function(t,e,i,n){var r=t instanceof Array;t=r?t:[t];var s,a,o=n.stagger,h=[];for(a=0;a<t.length;a++)s=new S(t[a],e,i,n),o&&(s.delay=(n.delay||0)+(a*o||0)),s.start(),h.push(s);return r?h:s},to:function(t,e,i){return S.fromTo(t,null,e,i)},from:function(t,e,i){return S.fromTo(t,e,null,i)}}})}(),T=function(){function t(t,e,i,n,r){return t=t||{},e&&(t.EaseIn=e),i&&(t.EaseOut=i),n&&(t.EaseInOut=n),r&&(t.EaseNone=r),t}var e=t(null,null,null,null,function(t){return t}),i=t(null,function(t){return t*t},function(t){return-t*(t-2)},function(t){return 1>(t*=2)?.5*t*t:-.5*(--t*(t-2)-1)}),n=t(null,function(t){return t*t*t},function(t){return--t*t*t+1},function(t){return 1>(t*=2)?.5*t*t*t:.5*((t-=2)*t*t+2)}),r=t(null,function(t){return t*t*t*t},function(t){return-(--t*t*t*t-1)},function(t){return 1>(t*=2)?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)}),s=t(null,function(t){return t*t*t*t*t},function(t){return--t*t*t*t*t+1},function(t){return 1>(t*=2)?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)}),a=Math,o=a.PI,h=.5*o,l=a.sin,c=a.cos,u=a.pow,d=a.sqrt,a=t(null,function(t){return-c(t*h)+1},function(t){return l(t*h)},function(t){return-.5*(c(o*t)-1)}),f=t(null,function(t){return 0==t?0:u(2,10*(t-1))},function(t){return 1==t?1:-u(2,-10*t)+1},function(t){return 0==t||1==t?t:1>(t*=2)?.5*u(2,10*(t-1)):.5*(-u(2,-10*(t-1))+2)}),p=t(null,function(t){return-(d(1-t*t)-1)},function(t){return d(1- --t*t)},function(t){return 1>(t/=.5)?-.5*(d(1-t*t)-1):.5*(d(1-(t-=2)*t)+1)}),m=t({a:1,p:.4,s:.1,config:function(t,e){m.a=t,m.p=e,m.s=e/(2*o)*Math.asin(1/t)||0}},function(t){return-(m.a*u(2,10*--t)*l(2*(t-m.s)*o/m.p))},function(t){return m.a*u(2,-10*t)*l(2*(t-m.s)*o/m.p)+1},function(t){return 1>(t*=2)?-.5*m.a*u(2,10*--t)*l(2*(t-m.s)*o/m.p):m.a*u(2,-10*--t)*l(2*(t-m.s)*o/m.p)*.5+1}),g=t({o:1.70158,s:2.59491,config:function(t){g.o=t,g.s=1.525*t}},function(t){return t*t*((g.o+1)*t-g.o)},function(t){return--t*t*((g.o+1)*t+g.o)+1},function(t){return 1>(t*=2)?.5*t*t*((g.s+1)*t-g.s):.5*((t-=2)*t*((g.s+1)*t+g.s)+2)}),v=t(null,function(t){return 1-v.EaseOut(1-t)},function(t){return.36364>(t/=1)?7.5625*t*t:.72727>t?7.5625*(t-=.54545)*t+.75:.90909>t?7.5625*(t-=.81818)*t+.9375:7.5625*(t-=.95455)*t+.984375},function(t){return.5>t?.5*v.EaseIn(2*t):.5*v.EaseOut(2*t-1)+.5});return{Linear:e,Quad:i,Cubic:n,Quart:r,Quint:s,Sine:a,Expo:f,Circ:p,Elastic:m,Back:g,Bounce:v}}(),C=i.create({Mixes:n,constructor:function(t){this._source=[],this.add(t)},maxConnections:2,_source:null,_loaded:0,_connections:0,_currentIndex:-1,add:function(t){return t&&(t=t instanceof Array?t:[t],this._source=this._source.concat(t)),this},get:function(t){if(t)for(var e=this._source,i=0;i<e.length;i++){var n=e[i];if(n.id===t||n.src===t)return n}return null},getContent:function(t){return(t=this.get(t))&&t.content},start:function(){return this._loadNext(),this},_loadNext:function(){var t=this,e=t._source,i=e.length;if(t._loaded>=i)t.fire("complete");else if(t._currentIndex<i-1&&t._connections<t.maxConnections){var n=++t._currentIndex,e=e[n],r=t._getLoader(e);if(r){var s=r.onLoad,a=r.onError;r.onLoad=function(e){r.onLoad=s,r.onError=a,e=s&&s.call(r,e)||e.target,t._onItemLoad(n,e)},r.onError=function(e){r.onLoad=s,(r.onError=a)&&a.call(r,e),t._onItemError(n,e)},t._connections++}t._loadNext(),r&&r.load(e)}},_getLoader:function(t){var e=t.loader;if(e)return e;var i;if(!(i=t.type)){var n;(t=t.src.match(/\/?[^/]+\.(\w+)(\?\S+)?$/i))&&(n=t[1].toLowerCase()),i=n||null}switch(i){case"png":case"jpg":case"jpeg":case"gif":e=new A;break;case"js":case"jsonp":e=new k}return e},_onItemLoad:function(t,e){var i=this._source[t];i.loaded=!0,i.content=e,this._connections--,this._loaded++,this.fire("load",i),this._loadNext()},_onItemError:function(t,e){var i=this._source[t];i.error=e,this._connections--,this._loaded++,this.fire("error",i),this._loadNext()},getSize:function(t){for(var e=0,i=this._source,n=0;n<i.length;n++)var r=i[n],e=e+((t?r.loaded&&r.size:r.size)||0);return e},getLoaded:function(){return this._loaded},getTotal:function(){return this._source.length}}),A=i.create({load:function(t){var e=this,i=new Image;t.crossOrigin&&(i.crossOrigin=t.crossOrigin),i.onload=function(){e.onLoad(i)},i.onerror=i.onabort=e.onError.bind(i),i.src=t.src+(t.noCache?(-1==t.src.indexOf("?")?"?":"&")+"t="+ +new Date:"")},onLoad:function(e){return e=e||t.event,e.onload=e.onerror=e.onabort=null,e},onError:function(t){var e=t.target;return e.onload=e.onerror=e.onabort=null,t}}),k=i.create({load:function(e){var i=e.src,n="jsonp"==e.type;if(n){var r=e.callbackName||"callback",s=e.callback||"jsonp"+ ++k._count;t[s]||(t[s]=function(){delete t[s]})}n&&(i+=(-1==i.indexOf("?")?"?":"&")+r+"="+s),e.noCache&&(i+=(-1==i.indexOf("?")?"?":"&")+"t="+ +new Date),n=document.createElement("script"),n.type="text/javascript",n.async=!0,n.onload=this.onLoad.bind(this),n.onerror=this.onError.bind(this),n.src=i,e.id&&(n.id=e.id),document.getElementsByTagName("head")[0].appendChild(n)},onLoad:function(t){return t=t.target,t.onload=t.onerror=null,t},onError:function(t){var e=t.target;return e.onload=e.onerror=null,t},Statics:{_count:0}}),P=i.create({Mixes:n,constructor:function(t){e.copy(this,t,!0),this._onAudioEvent=this._onAudioEvent.bind(this)},src:null,loop:!1,autoPlay:!1,loaded:!1,playing:!1,duration:0,volume:1,muted:!1,_element:null,load:function(){if(!this._element)try{var t=this._element=new Audio;t.addEventListener("canplaythrough",this._onAudioEvent,!1),t.addEventListener("ended",this._onAudioEvent,!1),t.addEventListener("error",this._onAudioEvent,!1),t.src=this.src,t.volume=this.volume,t.load()}catch(e){t=this._element={},t.play=t.pause=function(){}}return this},_onAudioEvent:function(t){var e=t.type;switch(e){case"canplaythrough":t.target.removeEventListener(e,this._onAudioEvent),this.loaded=!0,this.duration=this._element.duration,this.fire("load"),this.autoPlay&&this._doPlay();break;case"ended":this.playing=!1,this.fire("end"),this.loop&&this._doPlay();break;case"error":this.fire("error")}},_doPlay:function(){this.playing||(this._element.volume=this.muted?0:this.volume,this._element.play(),this.playing=!0)},play:function(){return this.playing&&this.stop(),this._element?this.loaded&&this._doPlay():(this.autoPlay=!0,this.load()),this},pause:function(){return this.playing&&(this._element.pause(),this.playing=!1),this},resume:function(){return this.playing||this._doPlay(),this},stop:function(){return this.playing&&(this._element.pause(),this._element.currentTime=0,this.playing=!1),this},setVolume:function(t){return this.volume!=t&&(this.volume=t,this._element.volume=t),this},setMute:function(t){return this.muted!=t&&(this.muted=t,this._element.volume=t?0:this.volume),this},Statics:{isSupported:null!==t.Audio}}),I=function(){var r=t.AudioContext||t.webkitAudioContext,s=r?new r:null;return i.create({Mixes:n,constructor:function(t){e.copy(this,t,!0),this._init()},src:null,loop:!1,autoPlay:!1,loaded:!1,playing:!1,duration:0,volume:1,muted:!1,_context:null,_gainNode:null,_buffer:null,_audioNode:null,_startTime:0,_offset:0,_init:function(){this._context=s,this._gainNode=s.createGain?s.createGain():s.createGainNode(),this._gainNode.connect(s.destination),this._onAudioEvent=this._onAudioEvent.bind(this),this._onDecodeComplete=this._onDecodeComplete.bind(this),this._onDecodeError=this._onDecodeError.bind(this)},load:function(){if(!this._buffer){var t=new XMLHttpRequest;t.src=this.src,t.open("GET",this.src,!0),t.responseType="arraybuffer",t.onload=this._onAudioEvent,t.onprogress=this._onAudioEvent,t.onerror=this._onAudioEvent,t.send(),this._buffer=!0}return this},_onAudioEvent:function(t){switch(t.type){case"load":t=t.target,t.onload=t.onprogress=t.onerror=null,this._context.decodeAudioData(t.response,this._onDecodeComplete,this._onDecodeError);break;case"ended":this.playing=!1,this.fire("end"),this.loop&&this._doPlay();break;case"progress":this.fire(t);break;case"error":this.fire(t)}},_onDecodeComplete:function(t){this._buffer=t,this.loaded=!0,this.duration=t.duration,this.fire("load"),this.autoPlay&&this._doPlay()},_onDecodeError:function(){this.fire("error")},_doPlay:function(){this._clearAudioNode();var t=this._context.createBufferSource();t.start||(t.start=t.noteOn,t.stop=t.noteOff),t.buffer=this._buffer,t.onended=this._onAudioEvent,this._gainNode.gain.value=this.muted?0:this.volume,t.connect(this._gainNode),t.start(0,this._offset),this._audioNode=t,this._startTime=this._context.currentTime,this.playing=!0},_clearAudioNode:function(){var t=this._audioNode;t&&(t.onended=null,t.disconnect(0),this._audioNode=null)},play:function(){return this.playing&&this.stop(),this.loaded?this._doPlay():this._buffer||(this.autoPlay=!0,this.load()),this},pause:function(){return this.playing&&(this._audioNode.stop(0),this._offset+=this._context.currentTime-this._startTime,this.playing=!1),this},resume:function(){return this.playing||this._doPlay(),this},stop:function(){return this.playing&&(this._audioNode.stop(0),this._audioNode.disconnect(),this._offset=0,this.playing=!1),this},setVolume:function(t){return this.volume!=t&&(this.volume=t,this._gainNode.gain.value=t),this},setMute:function(t){return this.muted!=t&&(this.muted=t,this._gainNode.gain.value=t?0:this.volume),this},Statics:{isSupported:null!=r,enabled:!1,enable:function(){if(!this.enabled&&s){var t=s.createBufferSource();return t.buffer=s.createBuffer(1,1,22050),t.connect(s.destination),t.start?t.start(0,0,0):t.noteOn(0,0,0),this.enabled=!0}return this.enabled}}})}(),O=i.create({constructor:function(t){this.height=this.width=0,this.bounds=this.deadzone=this.target=null,this.scroll={x:0,y:0},e.copy(this,t)},tick:function(t){t=this.target;var e=this.scroll,i=this.bounds,n=this.deadzone;if(t){var r;n?(r=Math.min(Math.max(t.x-e.x,n[0]),n[0]+n[2]),n=Math.min(Math.max(t.y-e.y,n[1]),n[1]+n[3])):(r=.5*this.width,n=.5*this.height),e.x=t.x-r,e.y=t.y-n,i&&(e.x=Math.min(Math.max(e.x,i[0]),i[0]+i[2]),e.y=Math.min(Math.max(e.y,i[1]),i[0]+i[3]))}else e.x=0,e.y=0},follow:function(t,e){this.target=t,void 0!==e&&(this.deadzone=e),this.tick()}}),M=function(){function t(t,e){return e?t+2*(Math.random()-.5)*e:t}for(var n="x y vx vy ax ay rotation rotationV scale scaleV alpha alphaV life".split(" "),r=[],s=0,a=n.length;a>s;s++){var o=n[s];r.push(o),r.push(o+"Var")}var h={x:0,y:0,vx:0,vy:0,ax:0,ay:0,scale:1,scaleV:0,alpha:1,alphaV:0,rotation:0,rotationV:0,life:1},l=[],n=i.create({Extends:f,constructor:function p(t){this.id=this.id||t.id||e.getUid("ParticleSystem"),this.gy=this.gx=this.emitterY=this.emitterX=0,this.totalTime=1/0,this.emitNum=10,this.emitNumVar=0,this.emitTime=.2,this.emitTimeVar=0,this.particle={},p.superclass.constructor.call(this,t),this.container=t.container||this,this.reset(t)},Statics:{PROPS:r,PROPS_DEFAULT:h,diedParticles:l},reset:function(t){e.copy(this,t),this.particle.system=this,0>=this.totalTime&&(this.totalTime=1/0)},onUpdate:function(e){e*=.001,this._isRun&&(this._totalRunTime+=e,this._currentRunTime+=e,this._currentRunTime>=this._emitTime&&(this._currentRunTime=0,this._emitTime=t(this.emitTime,this.emitTimeVar),this._emit()),this._totalRunTime>=this.totalTime&&this.stop())},_emit:function(){for(var e=t(this.emitNum,this.emitNumVar)>>0,i=0;e>i;i++)this.container.addChild(c.create(this.particle))},start:function(){this.stop(!0),this._totalRunTime=this._currentRunTime=0,this._isRun=!0,this._emitTime=t(this.emitTime,this.emitTimeVar)},stop:function(t){if(this.isRun=!1,t)for(t=this.children.length-1;t>=0;t--)this.children[t].destroy()}}),c=i.create({Extends:d,constructor:function m(t){this.id=this.id||t.id||e.getUid("Particle"),m.superclass.constructor.call(this,t),this.init(t)},onUpdate:function(t){if(t*=.001,!this._died){var e=this.ay+this.system.gy;this.vx+=(this.ax+this.system.gx)*t,this.vy+=e*t,this.x+=this.vx*t,this.y+=this.vy*t,this.rotation+=this.rotationV,.1<this._time&&(this.alpha+=this.alphaV),this.scaleX=this.scaleY=this.scale+=this.scaleV,this._time+=t,(this._time>=this.life||0>this.alpha)&&this.destroy()}},setImage:function(t,e){this.drawable=this.drawable||new u,e=e||[0,0,t.width,t.height],this.width=e[2],this.height=e[3],this.drawable.rect=e,this.drawable.image=t},destroy:function(){this.died=!0,this.removeFromParent(),l.push(this)},init:function(e){this.system=e.system,this._died=!1,this._time=0,this.alpha=1;for(var i=0,n=r.length;n>i;i++){var s=r[i];this[s]=t(void 0===e[s]?h[s]:e[s],e[s+"Var"])}this.x+=this.system.emitterX,this.y+=this.system.emitterY,e.image&&(i=e.frame||[0,0,e.image.width,e.image.height],i[0].length&&(i=i[Math.random()*i.length>>0]),this.setImage(e.image,i),void 0!==e.pivotX&&(this.pivotX=e.pivotX*i[2]),void 0!==e.pivotY&&(this.pivotY=e.pivotY*i[3]))},Statics:{create:function(t){if(0<l.length){var e=l.pop();return e.init(t),e}return new c(t)}}});return n}();e.Class=i,e.EventMixin=n,e.Renderer=o,e.CanvasRenderer=h,e.DOMRenderer=l,e.Matrix=c,e.Drawable=u,e.View=d,e.Container=f,e.Stage=p,e.Bitmap=m,e.Sprite=g,e.DOMElement=v,e.Graphics=_,e.Text=y,e.BitmapText=x,e.Button=w,e.TextureAtlas=s,e.Ticker=b,e.drag={startDrag:function(t){function i(t){t.stopPropagation(),s(t),o.off(e.event.POINTER_START,i),o.fire("dragStart",h),o.__dragX=o.x-h.x,o.__dragY=o.y-h.y,a||(a=this.getStage()),a.on(e.event.POINTER_MOVE,r),document.addEventListener(e.event.POINTER_END,n)}function n(){document.removeEventListener(e.event.POINTER_END,n),a&&a.off(e.event.POINTER_MOVE,r),o.fire("dragEnd",h),o.on(e.event.POINTER_START,i)}function r(t){s(t),o.fire("dragMove",h),t=h.y+o.__dragY,o.x=Math.max(l,Math.min(u,h.x+o.__dragX)),o.y=Math.max(c,Math.min(d,t))}function s(t){h.preX=h.x,h.preY=h.y,h.x=t.stageX,h.y=t.stageY}var a,o=this;t=t||[-1/0,-1/0,1/0,1/0];var h={x:0,y:0,preX:0,preY:0},l=t[0],c=t[1],u=1/0==t[2]?1/0:l+t[2],d=1/0==t[3]?1/0:c+t[3];o.on(e.event.POINTER_START,i),o.stopDrag=function(){document.removeEventListener(e.event.POINTER_END,n),a&&a.off(e.event.POINTER_MOVE,r),o.off(e.event.POINTER_START,i)}},stopDrag:function(){}},e.Tween=S,e.Ease=T,e.LoadQueue=C,e.ImageLoader=A,e.ScriptLoader=k,e.HTMLAudio=P,e.WebAudio=I,e.WebSound={_audios:{},enableAudio:function(){I.isSupported&&I.enable()},getAudio:function(t){t=this._normalizeSource(t);var e=this._audios[t.src];return e||(I.isSupported?e=new I(t):P.isSupported&&(e=new P(t)),this._audios[t.src]=e),e},removeAudio:function(t){t="string"==typeof t?t:t.src;var e=this._audios[t];e&&(e.stop(),e.off(),this._audios[t]=null,delete this._audios[t])},_normalizeSource:function(t){var i={};return"string"==typeof t?i={src:t}:e.copy(i,t),i}},e.Camera=O,e.ParticleSystem=M,t.Hilo=e,t.H||(t.H=e)}(window);