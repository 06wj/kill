(function(v){var l=function(){var a=document,b=a.documentElement,c=0;return{getUid:function(a){var b=++c;if(a){var f=a.charCodeAt(a.length-1);48<=f&&57>=f&&(a+="_");return a+b}return b},viewToString:function(a){for(var b;a;)b=b?a.id+"."+b:a.id,a=a.parent;return b},copy:function(a,b,c){for(var g in b)if(!c||a.hasOwnProperty(g)||void 0!==a[g])a[g]=b[g];return a},browser:function(){var c=navigator.userAgent,c={iphone:/iphone/i.test(c),ipad:/ipad/i.test(c),ipod:/ipod/i.test(c),ios:/iphone|ipad|ipod/i.test(c),
android:/android/i.test(c),webkit:/webkit/i.test(c),chrome:/chrome/i.test(c),safari:/safari/i.test(c),firefox:/firefox/i.test(c),ie:/msie/i.test(c),opera:/opera/i.test(c),supportTouch:"ontouchstart"in v,supportCanvas:null!=a.createElement("canvas").getContext,supportStorage:!1,supportOrientation:"orientation"in v,supportDeviceMotion:"ondevicemotion"in v};try{localStorage.setItem("hilo","hilo"),localStorage.removeItem("hilo"),c.supportStorage=!0}catch(e){}var f=c.jsVendor=c.webkit?"webkit":c.firefox?
"Moz":c.opera?"O":c.ie?"ms":"",g=c.cssVendor="-"+f+"-",h=a.createElement("div"),k=h.style,r=void 0!=k[f+"Transform"];if(f=void 0!=k[f+"Perspective"])h.id="test3d",k=a.createElement("style"),k.textContent="@media ("+g+"transform-3d){#test3d{height:3px}}",a.head.appendChild(k),b.appendChild(h),f=3==h.offsetHeight,a.head.removeChild(k),b.removeChild(h);c.supportTransform=r;c.supportTransform3D=f;return c}(),event:function(){var a="ontouchstart"in v;return{POINTER_START:a?"touchstart":"mousedown",POINTER_MOVE:a?
"touchmove":"mousemove",POINTER_END:a?"touchend":"mouseup"}}(),align:{TOP_LEFT:"TL",TOP:"T",TOP_RIGHT:"TR",LEFT:"L",CENTER:"C",RIGHT:"R",BOTTOM_LEFT:"BL",BOTTOM:"B",BOTTOM_RIGHT:"BR"},getElementRect:function(a){try{var c=a.getBoundingClientRect()}catch(f){c={top:a.offsetTop,left:a.offsetLeft,width:a.offsetWidth,height:a.offsetHeight}}var g=(v.pageXOffset||b.scrollLeft)-(b.clientLeft||0)||0,h=(v.pageYOffset||b.scrollTop)-(b.clientTop||0)||0,k=v.getComputedStyle?getComputedStyle(a):a.currentStyle,r=
parseInt;a=r(k.paddingLeft)+r(k.borderLeftWidth)||0;var m=r(k.paddingTop)+r(k.borderTopWidth)||0,p=r(k.paddingRight)+r(k.borderRightWidth)||0,k=r(k.paddingBottom)+r(k.borderBottomWidth)||0,r=c.top||0,q=c.left||0;return{left:q+g+a,top:r+h+m,width:c.right-p-q-a,height:c.bottom-k-r-m}},createElement:function(b,c){var f=a.createElement(b),g,h,k;for(g in c)if(h=c[g],"style"===g)for(k in h)f.style[k]=h[k];else f[g]=h;return f},getElement:function(b){return a.getElementById(b)},setElementStyleByView:function(a){var b=
a.drawable,c=b.domElement.style,g=a._stateCache||(a._stateCache={}),h=l.browser.jsVendor,k=!1;this.cacheStateIfChanged(a,["visible"],g)&&(c.display=a.visible?"":"none");this.cacheStateIfChanged(a,["alpha"],g)&&(c.opacity=a.alpha);if(a.visible&&!(0>=a.alpha)){this.cacheStateIfChanged(a,["width"],g)&&(c.width=a.width+"px");this.cacheStateIfChanged(a,["height"],g)&&(c.height=a.height+"px");this.cacheStateIfChanged(a,["depth"],g)&&(c.zIndex=a.depth+1);if(k=this.cacheStateIfChanged(a,["pivotX","pivotY"],
g))c[h+"TransformOrigin"]=a.pivotX+"px "+a.pivotY+"px";if(this.cacheStateIfChanged(a,["x","y","rotation","scaleX","scaleY"],g)||k)c[h+"Transform"]=this.getTransformCSS(a);this.cacheStateIfChanged(a,["background"],g)&&(c.backgroundColor=a.background);c.pointerEvents||(c.pointerEvents="none");if(k=b.image)if(k=k.src,k!==g.image&&(g.image=k,c.backgroundImage="url("+k+")"),k=b.rect)b=k[0],k=k[1],b!==g.sx&&(g.sx=b,c.backgroundPositionX=-b+"px"),k!==g.sy&&(g.sy=k,c.backgroundPositionY=-k+"px");if(a=a.mask)if(b=
a.drawable.domElement.style.backgroundImage,b!==g.maskImage&&(g.maskImage=b,c[h+"MaskImage"]=b,c[h+"MaskRepeat"]="no-repeat"),b=a.x,a=a.y,b!==g.maskX||a!==g.maskY)g.maskX=b,g.maskY=a,c[h+"MaskPosition"]=b+"px "+a+"px"}},cacheStateIfChanged:function(a,b,c){var g,h,k,r,m=!1;g=0;for(h=b.length;g<h;g++)k=b[g],r=a[k],r!=c[k]&&(c[k]=r,m=!0);return m},getTransformCSS:function(a){var b=this.browser.supportTransform3D,c=b?"3d":"";return"translate"+c+"("+(a.x-a.pivotX)+"px, "+(a.y-a.pivotY)+(b?"px, 0px)":"px)")+
"rotate"+c+(b?"(0, 0, 1, ":"(")+a.rotation+"deg)scale"+c+"("+a.scaleX+", "+a.scaleY+(b?", 1)":")")}}}(),n=function(){var a=function(a){var c={},e,f;for(e in a)f=a[e],b.hasOwnProperty(e)?b[e].call(this,f):c[e]=f;d(this.prototype,c)},b={Extends:function(a){var b=this.prototype,e=c(a.prototype);d(this,a);d(e,b);e.constructor=this;this.prototype=e;this.superclass=a.prototype},Mixes:function(a){a instanceof Array||(a=[a]);for(var b=this.prototype,c;c=a.shift();)d(b,c.prototype||c)},Statics:function(a){d(this,
a)}},c=function(){if(Object.__proto__)return function(a){return{__proto__:a}};var a=function(){};return function(b){a.prototype=b;return new a}}(),d=function(a){for(var b=1,c=arguments.length;b<c;b++){var d=arguments[b],e,g;for(g in d){var l=d[g];!l||"object"!==typeof l||void 0===l.value&&"function"!==typeof l.get&&"function"!==typeof l.set?a[g]=l:(e=e||{},e[g]=l)}e&&f(a,e)}return a};try{var e=Object.defineProperty,f=Object.defineProperties;e({},"$",{value:0})}catch(g){"__defineGetter__"in Object&&
(e=function(a,b,c){"value"in c&&(a[b]=c.value);"get"in c&&a.__defineGetter__(b,c.get);"set"in c&&a.__defineSetter__(b,c.set);return a},f=function(a,b){for(var c in b)b.hasOwnProperty(c)&&e(a,c,b[c]);return a})}return{create:function(b){b=b||{};var c=b.hasOwnProperty("constructor")?b.constructor:function(){};a.call(c,b);return c},mix:d}}(),B={_listeners:null,on:function(a,b,c){var d=this._listeners=this._listeners||{};a=d[a]=d[a]||[];for(var d=0,e=a.length;d<e;d++)if(a[d].listener===b)return;a.push({listener:b,
once:c});return this},off:function(a,b){if(0==arguments.length)return this._listeners=null,this;var c=this._listeners&&this._listeners[a];if(c){if(1==arguments.length)return delete this._listeners[a],this;for(var d=0,e=c.length;d<e;d++)if(c[d].listener===b){c.splice(d,1);0===c.length&&delete this._listeners[a];break}}return this},fire:function(a,b){var c,d;"string"===typeof a?d=a:(c=a,d=a.type);var e=this._listeners;if(!e)return!1;var f=e[d];if(f){f=f.slice(0);c=c||new T(d,this,b);if(c._stopped)return!1;
for(var g=0;g<f.length;g++){var h=f[g];h.listener.call(this,c);h.once&&f.splice(g--,1)}0==f.length&&delete e[d];return!0}return!1}},T=n.create({constructor:function(a,b,c){this.type=a;this.target=b;this.detail=c;this.timeStamp=+new Date},type:null,target:null,detail:null,timeStamp:0,stopImmediatePropagation:function(){this._stopped=!0}}),z=v.Event;if(z){var z=z.prototype,M=z.stopImmediatePropagation;z.stopImmediatePropagation=function(){M&&M.call(this);this._stopped=!0}}var F=n.create({constructor:function(a){a=
a||{};l.copy(this,a,!0)},canvas:null,stage:null,startDraw:function(a){},draw:function(a){},endDraw:function(a){},transform:function(){},hide:function(){},remove:function(a){},clear:function(a,b,c,d){},resize:function(a,b){}}),G=n.create({Extends:F,constructor:function(a){G.superclass.constructor.call(this,a);this.context=this.canvas.getContext("2d")},context:null,startDraw:function(a){return a.visible&&0<a.alpha?(a===this.stage&&this.context.clearRect(0,0,a.width,a.height),this.context.save(),!0):
!1},draw:function(a){var b=this.context,c=a.width,d=a.height,e=a.background;e&&(b.fillStyle=e,b.fillRect(0,0,c,d));var f=a.drawable;if(e=f&&f.image){var f=f.rect,g=f[2],h=f[3],k=f[4],r=f[5];0!==g&&0!==h&&(c||d||(c=a.width=g,d=a.height=h),(k||r)&&b.translate(k-.5*g,r-.5*h),b.drawImage(e,f[0],f[1],g,h,0,0,c,d))}},endDraw:function(a){this.context.restore()},transform:function(a){var b=a.drawable;if(b&&b.domElement)l.setElementStyleByView(a);else{var b=this.context,c=a.scaleX,d=a.scaleY;if(a===this.stage){var e=
this.canvas.style,f=a._scaleX,g=a._scaleY;if(!f&&1!=c||f&&f!=c)a._scaleX=c,e.width=c*a.width+"px";if(!g&&1!=d||g&&g!=d)a._scaleY=d,e.height=d*a.height+"px"}else{var e=a.x,f=a.y,g=a.pivotX,h=a.pivotY,k=a.rotation%360,r=a.mask;r&&(r._render(this),b.clip());if(r=a.align)if("function"===typeof r)a.align();else{var m=a.parent;if(m){var p=a.width,q=a.height,n=m.width,m=m.height;switch(r){case "TL":f=e=0;break;case "T":e=n-p>>1;f=0;break;case "TR":e=n-p;f=0;break;case "L":e=0;f=m-q>>1;break;case "C":e=n-
p>>1;f=m-q>>1;break;case "R":e=n-p;f=m-q>>1;break;case "BL":e=0;f=m-q;break;case "B":e=n-p>>1;f=m-q;break;case "BR":e=n-p,f=m-q}}}0==e&&0==f||b.translate(e,f);0!=k&&b.rotate(k*Math.PI/180);1==c&&1==d||b.scale(c,d);0==g&&0==h||b.translate(-g,-h)}0<a.alpha&&(b.globalAlpha*=a.alpha)}},remove:function(a){if(a=(a=a.drawable)&&a.domElement){var b=a.parentNode;b&&b.removeChild(a)}},clear:function(a,b,c,d){this.context.clearRect(a,b,c,d)},resize:function(a,b){this.canvas.width=a;this.canvas.height=b}}),H=
function(){function a(a,c){var d=a.tagName||"div",e=c.image,f=a.width||e&&e.width,g=a.height||e&&e.height,h=l.createElement(d),k=h.style;a.id&&(h.id=a.id);k.position="absolute";k.left=(a.left||0)+"px";k.top=(a.top||0)+"px";k.width=f+"px";k.height=g+"px";if("canvas"==d)h.width=f,h.height=g,e&&(d=h.getContext("2d"),f=c.rect||[0,0,f,g],d.drawImage(e,f[0],f[1],f[2],f[3],a.x||0,a.y||0,a.width||f[2],a.height||f[3]));else{k.opacity=void 0!=a.alpha?a.alpha:1;if(a===this.stage||a.clipChildren)k.overflow="hidden";
e&&e.src&&(k.backgroundImage="url("+e.src+")",k.backgroundPosition=-(a.rectX||0)+"px "+-(a.rectY||0)+"px")}return h}return n.create({Extends:F,constructor:function(a){H.superclass.constructor.call(this,a)},startDraw:function(b){var c=b.drawable=b.drawable||new x;c.domElement=c.domElement||a(b,c);return!0},draw:function(a){var c=a.parent,d=a.drawable.domElement,e=d.parentNode;c?(a=c.drawable.domElement,a!=e&&a.appendChild(d)):a!==this.stage||e||(d.style.overflow="hidden",this.canvas.appendChild(d))},
transform:function(a){l.setElementStyleByView(a);if(a===this.stage){var c=this.canvas.style,d=a._scaleX,e=a._scaleY,f=a.scaleX,g=a.scaleY;if(!d&&1!=f||d&&d!=f)a._scaleX=f,c.width=f*a.width+"px";if(!e&&1!=g||e&&e!=g)a._scaleY=g,c.height=g*a.height+"px"}},remove:function(a){if(a=(a=a.drawable)&&a.domElement){var c=a.parentNode;c&&c.removeChild(a)}},hide:function(a){if(a=a.drawable&&a.drawable.domElement)a.style.display="none"},resize:function(a,c){var d=this.canvas.style;d.width=a+"px";d.height=c+"px";
"absolute"!=d.position&&(d.position="relative")}})}(),N=n.create({constructor:function(a,b,c,d,e,f){this.a=a;this.b=b;this.c=c;this.d=d;this.tx=e;this.ty=f},concat:function(a){var b=arguments,c=this.a,d=this.b,e=this.c,f=this.d,g=this.tx,h=this.ty;if(6<=b.length)var k=b[0],r=b[1],m=b[2],p=b[3],q=b[4],b=b[5];else k=a.a,r=a.b,m=a.c,p=a.d,q=a.tx,b=a.ty;this.a=c*k+d*m;this.b=c*r+d*p;this.c=e*k+f*m;this.d=e*r+f*p;this.tx=g*k+h*m+q;this.ty=g*r+h*p+b;return this},rotate:function(a){var b=Math.sin(a);a=Math.cos(a);
var c=this.a,d=this.b,e=this.c,f=this.d,g=this.tx,h=this.ty;this.a=c*a-d*b;this.b=c*b+d*a;this.c=e*a-f*b;this.d=e*b+f*a;this.tx=g*a-h*b;this.ty=g*b+h*a;return this},scale:function(a,b){this.a*=a;this.d*=b;this.c*=a;this.b*=b;this.tx*=a;this.ty*=b;return this},translate:function(a,b){this.tx+=a;this.ty+=b;return this},identity:function(){this.a=this.d=1;this.b=this.c=this.tx=this.ty=0;return this},invert:function(){var a=this.a,b=this.b,c=this.c,d=this.d,e=this.tx,f=a*d-b*c;this.a=d/f;this.b=-b/f;
this.c=-c/f;this.d=a/f;this.tx=(c*this.ty-d*e)/f;this.ty=-(a*this.ty-b*e)/f;return this},transformPoint:function(a,b,c){var d=a.x*this.a+a.y*this.c+this.tx,e=a.x*this.b+a.y*this.d+this.ty;b&&(d=d+.5>>0,e=e+.5>>0);if(c)return{x:d,y:e};a.x=d;a.y=e;return a}}),x=n.create({constructor:function(a){this.init(a)},image:null,rect:null,init:function(a){var b=this,c=b.image;x.isDrawable(a)?b.image=a:l.copy(b,a,!0);a=b.image;if("string"===typeof a)if(c&&a===c.getAttribute("src"))a=b.image=c;else{b.image=null;
var d=new Image;d.onload=function(){d.onload=null;b.init(d)};d.src=a;return}a&&!b.rect&&(b.rect=[0,0,a.width,a.height])},Statics:{isDrawable:function(a){if(!a||!a.tagName)return!1;a=a.tagName.toLowerCase();return"img"===a||"canvas"===a||"video"===a}}}),w=function(){function a(a,c,d){for(var e=a.length,f=c.length,g,h,k,r,m,p,q=0,l=g=0;l<e;l++){g=a[l];h=a[l<e-1?l+1:0];q=g.y-h.y;g=h.x-g.x;h=Math.sqrt(q*q+g*g);q/=h;g/=h;h=k=a[0].x*q+a[0].y*g;for(var n=1;n<e;n++)p=a[n].x*q+a[n].y*g,p>k?k=p:p<h&&(h=p);
r=m=c[0].x*q+c[0].y*g;for(n=1;n<f;n++)p=c[n].x*q+c[n].y*g,p>m?m=p:p<r&&(r=p);h<r?(h=r-k,q=-q,g=-g):h-=m;if(0<=h)return!1;h>d.overlap&&(d.overlap=h,d.normal.x=q,d.normal.y=g)}return d}return n.create({Mixes:B,constructor:function(a){a=a||{};this.id=this.id||a.id||l.getUid("View");l.copy(this,a,!0)},id:null,x:0,y:0,width:0,height:0,alpha:1,rotation:0,visible:!0,pivotX:0,pivotY:0,scaleX:1,scaleY:1,pointerEnabled:!0,background:null,mask:null,align:null,drawable:null,boundsArea:null,parent:null,depth:-1,
getStage:function(){for(var a=this,c;c=a.parent;)a=c;return a.canvas?a:null},getScaledWidth:function(){return this.width*this.scaleX},getScaledHeight:function(){return this.height*this.scaleY},addTo:function(a,c){"number"===typeof c?a.addChildAt(this,c):a.addChild(this);return this},removeFromParent:function(){var a=this.parent;a&&a.removeChild(this);return this},getBounds:function(){for(var a=this.width,c=this.height,d=this.getConcatenatedMatrix(),a=this.boundsArea||[{x:0,y:0},{x:a,y:0},{x:a,y:c},
{x:0,y:c}],c=[],e,f,g,h,k,r,l,p=0,q=a.length;p<q;p++)e=d.transformPoint(a[p],!0,!0),f=e.x,g=e.y,0==p?(h=k=f,r=l=g):(h>f?h=f:k<f&&(k=f),r>g?r=g:l<g&&(l=g)),c[p]=e;c.x=h;c.y=r;c.width=k-h;c.height=l-r;return c},getConcatenatedMatrix:function(a){for(var c=new N(1,0,0,1,0,0),d=this;d!=a&&d.parent;d=d.parent){var e=1,f=0,g=d.rotation%360,h=d.pivotX,k=d.pivotY,l=d.scaleX,m=d.scaleY;g&&(f=g*Math.PI/180,e=Math.cos(f),f=Math.sin(f));0!=h&&(c.tx-=h);0!=k&&(c.ty-=k);c.concat(e*l,f*l,-f*m,e*m,d.x,d.y)}return c},
hitTestPoint:function(a,c,d){var e=this.getBounds(),f=a>=e.x&&a<=e.x+e.width&&c>=e.y&&c<=e.y+e.height;if(f&&d){d=0;for(var f=!1,g,h,k,l,m=0,p=e.length;m<p;m++){var q=e[m],n=e[(m+1)%p];if(q.y==n.y&&c==q.y&&(q.x>n.x?(g=n.x,h=q.x):(g=q.x,h=n.x),a>=g&&a<=h)){f=!0;continue}q.y>n.y?(k=n.y,l=q.y):(k=q.y,l=n.y);if(!(c<k||c>l)){var v=(c-q.y)*(n.x-q.x)/(n.y-q.y)+q.x;v>a?d++:v==a&&(f=!0);q.x>a&&q.y==c&&(q=e[(p+m-1)%p],(q.y<c&&n.y>c||q.y>c&&n.y<c)&&d++)}}f=f||1==d%2}return f},hitTestObject:function(b,c){var d=
this.getBounds(),e=b.getBounds(),f=d.x<=e.x+e.width&&e.x<=d.x+d.width&&d.y<=e.y+e.height&&e.y<=d.y+d.height;f&&c&&(f=(f=a(d,e,{overlap:-Infinity,normal:{x:0,y:0}}))?a(e,d,f):!1);return!!f},_render:function(a,c){this.onUpdate&&!1===this.onUpdate(c)||!a.startDraw(this)||(a.transform(this),this.render(a,c),a.endDraw(this))},_fireMouseEvent:function(a){a.eventCurrentTarget=this;this.fire(a);if("mousemove"==a.type){if(!this.__mouseOver){this.__mouseOver=!0;var c=l.copy({},a);c.type="mouseover";this.fire(c)}}else"mouseout"==
a.type&&(this.__mouseOver=!1);c=this.parent;a._stopped||a._stopPropagationed||!c||("mouseout"==a.type||"touchout"==a.type?c.hitTestPoint(a.stageX,a.stageY,!0)||c._fireMouseEvent(a):c._fireMouseEvent(a))},onUpdate:null,render:function(a,c){a.draw(this)},toString:function(){return l.viewToString(this)}})}(),A=n.create({Extends:w,constructor:function(a){a=a||{};this.id=this.id||a.id||l.getUid("Container");A.superclass.constructor.call(this,a);this.children?this._updateChildren():this.children=[]},children:null,
pointerChildren:!0,clipChildren:!1,getNumChildren:function(){return this.children.length},addChildAt:function(a,b){var c=this.children,d=c.length,e=a.parent;b=0>b?0:b>d?d:b;var f=this.getChildIndex(a);if(f==b)return this;0<=f?(c.splice(f,1),b=b==d?d-1:b):e&&e.removeChild(a);c.splice(b,0,a);0>f?this._updateChildren(b):this._updateChildren(f<b?f:b,(f<b?b:f)+1);return this},addChild:function(a){for(var b=this.children.length,c=arguments,d=0,e=c.length;d<e;d++)this.addChildAt(c[d],b+d);return this},removeChildAt:function(a){var b=
this.children;if(0>a||a>=b.length)return null;var c=b[a];if(c){if(!c.__renderer)for(var d=c;d=d.parent;)if(d.renderer){c.__renderer=d.renderer;break}else if(d.__renderer){c.__renderer=d.__renderer;break}c.__renderer&&c.__renderer.remove(c);c.parent=null;c.depth=-1}b.splice(a,1);this._updateChildren(a);return c},removeChild:function(a){return this.removeChildAt(this.getChildIndex(a))},removeChildById:function(a){for(var b=this.children,c,d=0,e=b.length;d<e;d++)if(c=b[d],c.id===a)return this.removeChildAt(d),
c;return null},removeAllChildren:function(){for(;this.children.length;)this.removeChildAt(0);return this},getChildAt:function(a){var b=this.children;return 0>a||a>=b.length?null:b[a]},getChildById:function(a){for(var b=this.children,c,d=0,e=b.length;d<e;d++)if(c=b[d],c.id===a)return c;return null},getChildIndex:function(a){return this.children.indexOf(a)},setChildIndex:function(a,b){var c=this.children,d=c.indexOf(a);if(0<=d&&d!=b){var e=c.length;b=0>b?0:b>=e?e-1:b;c.splice(d,1);c.splice(b,0,a);this._updateChildren()}return this},
swapChildren:function(a,b){var c=this.children,d=this.getChildIndex(a),e=this.getChildIndex(b);a.depth=e;c[e]=a;b.depth=d;c[d]=b},swapChildrenAt:function(a,b){var c=this.children,d=this.getChildAt(a),e=this.getChildAt(b);d.depth=b;c[b]=d;e.depth=a;c[a]=e},sortChildren:function(a){var b=this.children;if("string"==typeof a){var c=a;a=function(a,b){return b[c]-a[c]}}b.sort(a);this._updateChildren()},_updateChildren:function(a,b){var c=this.children,d;b=b||c.length;for(var e=a||0;e<b;e++)d=c[e],d.depth=
e+1,d.parent=this},contains:function(a){for(;a=a.parent;)if(a===this)return!0;return!1},getViewAtPoint:function(a,b,c,d,e){for(var f=d?[]:null,g=this.children,h,k,l=g.length-1;0<=l;l--)if(h=g[l],!(!h||!h.visible||0>=h.alpha||e&&!h.pointerEnabled))if(h.children&&h.children.length&&(!e||h.pointerChildren)&&(k=h.getViewAtPoint(a,b,c,d,e)),k)if(d)k.length&&(f=f.concat(k));else return k;else if(h.hitTestPoint(a,b,c))if(d)f.push(h);else return h;return d&&f.length?f:null},render:function(a,b){A.superclass.render.call(this,
a,b);var c=this.children.slice(0),d,e,f;d=0;for(e=c.length;d<e;d++)f=c[d],f.parent===this&&f._render(a,b)}}),O=n.create({Extends:A,constructor:function(a){a=a||{};this.id=this.id||a.id||l.getUid("Stage");O.superclass.constructor.call(this,a);this._initRenderer(a);var b=this.width,c=this.height,d=this.updateViewport();a.width||(b=d&&d.width||320);a.height||(c=d&&d.height||480);this.resize(b,c,!0)},canvas:null,renderer:null,paused:!1,viewport:null,_initRenderer:function(a){var b=this.canvas;"string"===
typeof b&&(b=l.getElement(b));a=a.container;"string"===typeof a&&(a=l.getElement(a));b||(b=l.createElement("canvas",{style:{position:"absolute"}}));this.canvas=b;a&&a.appendChild(b);a={canvas:b,stage:this};this.renderer=b.getContext?new G(a):new H(a)},addTo:function(a){var b=this.canvas;b.parentNode!==a&&a.appendChild(b);return this},tick:function(a){this.paused||this._render(this.renderer,a)},enableDOMEvent:function(a,b){var c=this,d=c.canvas,e="string"===typeof a?[a]:a;b=!1!==b;for(var f=c._domListener||
(c._domListener=function(a){c._onDOMEvent(a)}),g=0;g<e.length;g++)a=e[g],b?d.addEventListener(a,f,!1):d.removeEventListener(a,f);return c},_onDOMEvent:function(a){var b=a.type,c=0==b.indexOf("touch"),d=a;if(c)var e=a.touches,d=a.changedTouches,d=e&&e.length?e[0]:d&&d.length?d[0]:null;var e=d.pageX||d.clientX,d=d.pageY||d.clientY,f=this.viewport||this.updateViewport();a.stageX=e=(e-f.left)/this.scaleX;a.stageY=d=(d-f.top)/this.scaleY;a.stopPropagation=function(){this._stopPropagationed=!0};var e=this.getViewAtPoint(e,
d,!0,!1,!0)||this,d=this.canvas,f=this._eventTarget,g="mouseout"===b;if(f&&(!(f==e||f.contains&&f.contains(e))||g)){if(g="touchmove"===b?"touchout":"mousemove"===b||g||!e?"mouseout":null){var h=l.copy({},a);h.type=g;h.eventTarget=f;f._fireMouseEvent(h)}a.lastEventTarget=f;this._eventTarget=null}e&&e.pointerEnabled&&"mouseout"!==b&&(a.eventTarget=this._eventTarget=e,e._fireMouseEvent(a));c||(d.style.cursor=e&&e.pointerEnabled&&e.useHandCursor?"pointer":"");l.browser.android&&"touchmove"===b&&a.preventDefault()},
updateViewport:function(){var a=this.canvas,b=null;a.parentNode&&(b=this.viewport=l.getElementRect(a));return b},resize:function(a,b,c){if(c||this.width!==a||this.height!==b)this.width=a,this.height=b,this.renderer.resize(a,b),this.updateViewport()}}),I=n.create({Extends:w,constructor:function(a){a=a||{};this.id=this.id||a.id||l.getUid("Bitmap");I.superclass.constructor.call(this,a);this.drawable=new x(a);if(!this.width||!this.height)if(a=this.drawable.rect)this.width=a[2],this.height=a[3]},setImage:function(a,
b){this.drawable.init({image:a,rect:b});b&&(this.width=b[2],this.height=b[3]);return this}}),J=n.create({Extends:w,constructor:function(a){a=a||{};this.id=this.id||a.id||l.getUid("Sprite");J.superclass.constructor.call(this,a);this._frames=[];this._frameNames={};this.drawable=new x;a.frames&&this.addFrame(a.frames)},_frames:null,_frameNames:null,_frameElapsed:0,_firstRender:!0,paused:!1,loop:!0,timeBased:!1,interval:1,currentFrame:0,getNumFrames:function(){return this._frames?this._frames.length:
0},addFrame:function(a,b){var c=null!=b?b:this._frames.length;if(a instanceof Array)for(var d=0,e=a.length;d<e;d++)this.setFrame(a[d],c+d);else this.setFrame(a,c);return this},setFrame:function(a,b){var c=this._frames,d=c.length;b=0>b?0:b>d?d:b;c[b]=a;a.name&&(this._frameNames[a.name]=a);if(0==b&&!this.width||!this.height)this.width=a.rect[2],this.height=a.rect[3];return this},getFrame:function(a){if("number"===typeof a){var b=this._frames;return 0>a||a>=b.length?null:b[a]}return this._frameNames[a]},
getFrameIndex:function(a){var b=this._frames,c=b.length,d=-1;if("number"===typeof a)d=a;else if(a="string"===typeof a?this._frameNames[a]:a)for(var e=0;e<c;e++)if(a===b[e]){d=e;break}return d},play:function(){this.paused=!1;return this},stop:function(){this.paused=!0;return this},goto:function(a,b){var c=this._frames.length,d=this.getFrameIndex(a);this.currentFrame=0>d?0:d>=c?c-1:d;this.paused=b;this._firstRender=!0;return this},_render:function(a,b){var c=this.currentFrame,d;this._firstRender?(d=
c,this._firstRender=!1):d=this._nextFrame(b);d!=c&&(this.currentFrame=d,(c=this._frames[d].callback)&&c.call(this));if(this.onEnterFrame)this.onEnterFrame(d);this.drawable.init(this._frames[d]);J.superclass._render.call(this,a,b)},_nextFrame:function(a){var b=this._frames,c=b.length,d=this.currentFrame,b=b[d],e=this._frameElapsed;a=0!=d||this.drawable?e+(this.timeBased?a:1):0;e=this._frameElapsed=a<(b.duration||this.interval)?a:0;(b.stop||!this.loop&&d>=c-1)&&this.stop();this.paused||0!=e||(null!=
b.next?d=this.getFrameIndex(b.next):d>=c-1?d=0:this.drawable&&d++);return d},setFrameCallback:function(a,b){if(a=this.getFrame(a))a.callback=b;return this},onEnterFrame:null}),P=n.create({Extends:w,constructor:function(a){a=a||{};this.id=this.id||a.id||l.getUid("DOMElement");P.superclass.constructor.call(this,a);this.drawable=new x;(this.drawable.domElement=a.element||l.createElement("div")).id=this.id},_render:function(a,b){this.onUpdate&&!1===this.onUpdate(b)||(a.transform(this),this.visible&&0<
this.alpha&&this.render(a,b))},render:function(a,b){var c=a.canvas;if(c.getContext){var d=this.depth,e=c.nextSibling,f;if(!this.drawable.domElement.parentNode){for(;e&&3!=e.nodeType;){f=parseInt(e.style.zIndex)||0;if(0>=f||f>d)break;e=e.nextSibling}c.parentNode.insertBefore(this.drawable.domElement,e)}}else a.draw(this)}}),Q=function(){var a=document.createElement("canvas"),b=a.getContext&&a.getContext("2d");return n.create({Extends:w,constructor:function(a){a=a||{};this.id=this.id||a.id||l.getUid("Graphics");
Q.superclass.constructor.call(this,a);this._actions=[];this._cache=null},lineWidth:1,lineAlpha:1,lineCap:null,lineJoin:null,miterLimit:10,hasStroke:!1,strokeStyle:"0",hasFill:!1,fillStyle:"0",fillAlpha:0,lineStyle:function(a,b,e,f,g,h){var k=this._addAction;k.call(this,["lineWidth",this.lineWidth=a||1]);k.call(this,["strokeStyle",this.strokeStyle=b||"0"]);k.call(this,["lineAlpha",this.lineAlpha=e||1]);void 0!=f&&k.call(this,["lineCap",this.lineCap=f]);void 0!=g&&k.call(this,["lineJoin",this.lineJoin=
g]);void 0!=h&&k.call(this,["miterLimit",this.miterLimit=h]);this.hasStroke=!0;return this},beginFill:function(a,b){var e=this._addAction;e.call(this,["fillStyle",this.fillStyle=a]);e.call(this,["fillAlpha",this.fillAlpha=b||1]);this.hasFill=!0;return this},endFill:function(){var a=this._addAction;this.hasStroke&&a.call(this,["stroke"]);this.hasFill&&a.call(this,["fill"]);return this},beginLinearGradientFill:function(a,d,e,f,g,h){a=b.createLinearGradient(a,d,e,f);d=0;for(e=g.length;d<e;d++)a.addColorStop(h[d],
g[d]);this.hasFill=!0;return this._addAction(["fillStyle",this.fillStyle=a])},beginRadialGradientFill:function(a,d,e,f,g,h,k,l){a=b.createRadialGradient(a,d,e,f,g,h);d=0;for(e=k.length;d<e;d++)a.addColorStop(l[d],k[d]);this.hasFill=!0;return this._addAction(["fillStyle",this.fillStyle=a])},beginBitmapFill:function(a,d){var e=b.createPattern(a,d||"");this.hasFill=!0;return this._addAction(["fillStyle",this.fillStyle=e])},beginPath:function(){return this._addAction(["beginPath"])},closePath:function(){return this._addAction(["closePath"])},
moveTo:function(a,b){return this._addAction(["moveTo",a,b])},lineTo:function(a,b){return this._addAction(["lineTo",a,b])},quadraticCurveTo:function(a,b,e,f){return this._addAction(["quadraticCurveTo",a,b,e,f])},bezierCurveTo:function(a,b,e,f,g,h){return this._addAction(["bezierCurveTo",a,b,e,f,g,h])},drawRect:function(a,b,e,f){return this._addAction(["rect",a,b,e,f])},drawRoundRectComplex:function(a,b,e,f,g,h,k,l){var m=this._addAction;m.call(this,["moveTo",a+g,b]);m.call(this,["lineTo",a+e-h,b]);
m.call(this,["arc",a+e-h,b+h,h,-Math.PI/2,0,!1]);m.call(this,["lineTo",a+e,b+f-k]);m.call(this,["arc",a+e-k,b+f-k,k,0,Math.PI/2,!1]);m.call(this,["lineTo",a+l,b+f]);m.call(this,["arc",a+l,b+f-l,l,Math.PI/2,Math.PI,!1]);m.call(this,["lineTo",a,b+g]);m.call(this,["arc",a+g,b+g,g,Math.PI,3*Math.PI/2,!1]);return this},drawRoundRect:function(a,b,e,f,g){return this.drawRoundRectComplex(a,b,e,f,g,g,g,g)},drawCircle:function(a,b,e){return this._addAction(["arc",a+e,b+e,e,0,2*Math.PI,0])},drawEllipse:function(a,
b,e,f){if(e==f)return this.drawCircle(a,b,e);var g=this._addAction;e/=2;f/=2;var h=.5522847498307933*e,k=.5522847498307933*f;a+=e;b+=f;g.call(this,["moveTo",a+e,b]);g.call(this,["bezierCurveTo",a+e,b-k,a+h,b-f,a,b-f]);g.call(this,["bezierCurveTo",a-h,b-f,a-e,b-k,a-e,b]);g.call(this,["bezierCurveTo",a-e,b+k,a-h,b+f,a,b+f]);g.call(this,["bezierCurveTo",a+h,b+f,a+e,b+k,a+e,b]);return this},drawSVGPath:function(a){var b=this._addAction;a=a.split(/,| (?=[a-zA-Z])/);b.call(this,["beginPath"]);for(var e=
0,f=a.length;e<f;e++){var g=a[e],h=g[0].toUpperCase(),g=g.substring(1).split(/,| /);0==g[0].length&&g.shift();switch(h){case "M":b.call(this,["moveTo",g[0],g[1]]);break;case "L":b.call(this,["lineTo",g[0],g[1]]);break;case "C":b.call(this,["bezierCurveTo",g[0],g[1],g[2],g[3],g[4],g[5]]);break;case "Z":b.call(this,["closePath"])}}return this},_draw:function(a){var b=this._actions,e=b.length,f;a.beginPath();for(f=0;f<e;f++){var g=b[f],h=g[0],k=1<g.length?g.slice(1):null;"function"==typeof a[h]?a[h].apply(a,
k):a[h]=g[1]}},render:function(a,b){if(a.canvas.getContext)this._draw(a.context);else{var e=this.drawable;e.image||(e.image=this.toImage());a.draw(this)}},cache:function(a){var b=this._cache;b||(b=this._cache=l.createElement("canvas",{width:this.width,height:this.height}),this._draw(b.getContext("2d")));a&&(b=this._cache=this.toImage());return b},uncache:function(){this._cache=null},toImage:function(a){var b=this._cache,e=this.width,f=this.height;b||(b=l.createElement("canvas",{width:e,height:f}),
this._draw(b.getContext("2d")));b instanceof HTMLImageElement||(a=b.toDataURL(a||"image/png"),b=new Image,b.src=a,b.width=e,b.height=f);return b},clear:function(){this._actions.length=0;this._cache=null;this.lineAlpha=this.lineWidth=1;this.lineJoin=this.lineCap=null;this.miterLimit=10;this.hasStroke=!1;this.strokeStyle="0";this.hasFill=!1;this.fillStyle="0";this.fillAlpha=1;return this},_addAction:function(a){this._actions.push(a);return this}})}(),E=n.create({Extends:w,constructor:function(a){a=
a||{};this.id=this.id||a.id||l.getUid("Text");E.superclass.constructor.call(this,a);a.font||(this.font="12px arial");this._fontHeight=E.measureFontHeight(this.font)},text:null,color:"#000",textAlign:null,textVAlign:null,outline:!1,lineSpacing:0,maxWidth:200,font:null,textWidth:0,textHeight:0,setFont:function(a){this.font!==a&&(this.font=a,this._fontHeight=E.measureFontHeight(a));return this},render:function(a,b){if(a.canvas.getContext)this._draw(a.context);else{var c=this.drawable.domElement,d=c.style;
d.font=this.font;d.textAlign=this.textAlign;d.color=this.color;d.width=this.width+"px";d.height=this.height+"px";d.lineHeight=this._fontHeight+this.lineSpacing+"px";c.innerHTML=this.text;a.draw(this)}},_draw:function(a){var b=this.text.toString();if(b){a.font=this.font;a.textAlign=this.textAlign;a.textBaseline="top";var c=b.split(/\r\n|\r|\n|<br(?:[ \/])*>/),d=0,e=0,f=this._fontHeight+this.lineSpacing,g,h,k,b=[];g=0;for(len=c.length;g<len;g++)if(h=c[g],k=a.measureText(h).width,k<=this.maxWidth)b.push({text:h,
y:e}),d<k&&(d=k),e+=f;else{k="";var l=0,m,p,q;p=0;for(wlen=h.length;p<wlen;p++)q=h[p],m=a.measureText(k+q).width,m>this.maxWidth?(b.push({text:k,y:e}),d<l&&(d=l),e+=f,k=q):(l=m,k+=q),p==wlen-1&&(b.push({text:k,y:e}),k!==q&&d<m&&(d=m),e+=f)}this.textWidth=d;this.textHeight=e;this.width||(this.width=d);this.height||(this.height=e);c=0;switch(this.textVAlign){case "middle":c=this.height-this.textHeight>>1;break;case "bottom":c=this.height-this.textHeight}if(g=this.background)a.fillStyle=g,a.fillRect(0,
0,this.width,this.height);this.outline?a.strokeStyle=this.color:a.fillStyle=this.color;for(g=0;g<b.length;g++)h=b[g],this._drawTextLine(a,h.text,c+h.y)}},_drawTextLine:function(a,b,c){var d=0,e=this.width;switch(this.textAlign){case "center":d=e>>1;break;case "right":case "end":d=e}this.outline?a.strokeText(b,d,c):a.fillText(b,d,c)},Statics:{measureFontHeight:function(a){var b=document.documentElement,c=l.createElement("div",{style:{font:a,position:"absolute"},innerHTML:"M"});b.appendChild(c);a=c.offsetHeight;
b.removeChild(c);return a}}}),C=n.create({Extends:A,constructor:function(a){a=a||{};this.id=this.id||a.id||l.getUid("BitmapText");C.superclass.constructor.call(this,a);if(a=a.text+"")this.text="",this.setText(a);this.pointerChildren=!1},glyphs:null,letterSpacing:0,text:"",textAlign:"left",setText:function(a){a=a.toString();var b=a.length;if(this.text!=a){this.text=a;var c,d,e,f=e=0,g=0;for(c=0;c<b;c++)if(d=a.charAt(c),d=this.glyphs[d])g=e+(0<e?this.letterSpacing:0),this.children[c]?(e=this.children[c],
e.setImage(d.image,d.rect)):(e=this._createBitmap(d),this.addChild(e)),e.x=g,e=g+d.rect[2],f=Math.max(f,d.rect[3]);for(c=this.children.length-1;c>=b;c--)this._releaseBitmap(this.children[c]),this.children[c].removeFromParent();this.width=e;this.height=f;this.setTextAlign();return this}},_createBitmap:function(a){var b;C._pool.length?(b=C._pool.pop(),b.setImage(a.image,a.rect)):b=new I({image:a.image,rect:a.rect});return b},_releaseBitmap:function(a){C._pool.push(a)},setTextAlign:function(a){this.textAlign=
a||this.textAlign;switch(this.textAlign){case "center":this.pivotX=.5*this.width;break;case "right":this.pivotX=this.width;break;default:this.pivotX=0}return this},hasGlyphs:function(a){var b=this.glyphs;if(!b)return!1;a=a.toString();var c=a.length,d;for(d=0;d<c;d++)if(!b[a.charAt(d)])return!1;return!0},Statics:{_pool:[],createGlyphs:function(a,b,c,d){var e=a.toString();c=c||e.length;var f=b.width/c;d=b.height/(d||1);var g={},h=0;for(a=a.length;h<a;h++)charStr=e.charAt(h),g[charStr]={image:b,rect:[h%
c*f,d*Math.floor(h/c),f,d]};return g}}}),u=n.create({Extends:w,constructor:function(a){a=a||{};this.id=this.id||a.id||l.getUid("Button");u.superclass.constructor.call(this,a);this.drawable=new x(a);this.setState(u.UP)},upState:null,overState:null,downState:null,disabledState:null,state:null,enabled:!0,useHandCursor:!0,setEnabled:function(a){this.enabled!=a&&(a?this.setState(u.UP):this.setState(u.DISABLED));return this},setState:function(a){if(this.state!==a){this.state=a;this.pointerEnabled=this.enabled=
a!==u.DISABLED;var b;switch(a){case u.UP:b=this.upState;break;case u.OVER:b=this.overState;break;case u.DOWN:b=this.downState;break;case u.DISABLED:b=this.disabledState}b&&(this.drawable.init(b),l.copy(this,b,!0))}return this},fire:function(a,b){if(this.enabled){switch("string"===typeof a?a:a.type){case "mousedown":case "touchstart":case "touchmove":this.setState(u.DOWN);break;case "mouseover":this.setState(u.OVER);break;case "mouseup":this.overState?this.setState(u.OVER):this.upState&&this.setState(u.UP);
break;case "touchend":case "touchout":case "mouseout":this.setState(u.UP)}return u.superclass.fire.call(this,a,b)}},Statics:{UP:"up",OVER:"over",DOWN:"down",DISABLED:"disabled"}}),z=function(){function a(a,c){var d={image:a.image,rect:a.rect};c&&(d.name=c.name||null,d.duration=c.duration||0,d.stop=!!c.stop,d.next=c.next||null);return d}return n.create({constructor:function(b){var c;var d=b.frames;if(d){c=[];var e;if(d instanceof Array)for(var f=0,g=d.length;f<g;f++)e=d[f],c[f]={image:b.image,rect:e};
else{e=d.frameWidth;for(var g=d.frameHeight,h=b.width/e|0,f=b.height/g|0,d=d.numFrames||h*f,f=0;f<d;f++)c[f]={image:b.image,rect:[f%h*e,(f/h|0)*g,e,g]}}}else c=null;this._frames=c;var k;c=this._frames;if(b=b.sprites){var d={},l;for(k in b){f=b[k];if("number"===typeof f)e=a(c[f]);else if(f instanceof Array)for(e=[],g=0,h=f.length;g<h;g++){l=f[g];var m;"number"===typeof l?l=a(c[l]):(m=l.rect,"number"===typeof m&&(m=c[l.rect]),l=a(m,l));e[g]=l}else for(e=[],g=f.from;g<=f.to;g++)e[g-f.from]=a(c[g],f[g]);
d[k]=e}k=d}else k=null;this._sprites=k},_frames:null,_sprites:null,getFrame:function(a){var c=this._frames;return c&&c[a]},getSprite:function(a){var c=this._sprites;return c&&c[a]},Statics:{createSpriteFrames:function(a,c,d,e,f,g,h){if("[object Array]"===Object.prototype.toString.call(a)){c=[];for(var k=0,l=a.length;k<l;k++)c=c.concat(this.createSpriteFrames.apply(this,a[k]))}else{if("string"===typeof c){var m=c.split(",");c=[];for(var p=0,q=m.length;p<q;p++)if(l=m[p].split("-"),1==l.length)c.push(parseInt(l[0]));
else for(k=parseInt(l[0]),l=parseInt(l[1]);k<=l;k++)c.push(k)}m=Math.floor(d.width/e);for(k=0;k<c.length;k++)p=c[k],c[k]={rect:[p%m*e,f*Math.floor(p/m),e,f],image:d,duration:h};c[0].name=a;g?c[c.length-1].next=a:c[c.length-1].stop=!0}return c}}})}(),U=n.create({constructor:function(a){this._targetFPS=a||30;this._interval=1E3/this._targetFPS;this._tickers=[]},_paused:!1,_targetFPS:0,_interval:0,_intervalId:null,_tickers:null,_lastTime:0,_tickCount:0,_tickTime:0,_measuredFPS:0,start:function(a){if(!this._intervalId){this._lastTime=
+new Date;var b=this,c=this._interval,d=v.requestAnimationFrame||v[l.browser.jsVendor+"RequestAnimationFrame"];if(a&&d)var e=function(){b._tick()},f=function(){b._intervalId=setTimeout(f,c);d(e)};else f=function(){b._intervalId=setTimeout(f,c);b._tick()};f()}},stop:function(){clearTimeout(this._intervalId);this._intervalId=null;this._lastTime=0},pause:function(){this._paused=!0},resume:function(){this._paused=!1},_tick:function(){if(!this._paused){var a=+new Date,b=a-this._lastTime,c=this._tickers;
++this._tickCount>=this._targetFPS?(this._measuredFPS=1E3/(this._tickTime/this._tickCount)+.5>>0,this._tickTime=this._tickCount=0):this._tickTime+=a-this._lastTime;this._lastTime=a;for(var a=0,d=c.length;a<d;a++)c[a].tick(b)}},getMeasuredFPS:function(){return this._measuredFPS},addTick:function(a){if(!a||"function"!=typeof a.tick)throw Error("Ticker: The tick object must implement the tick method.");this._tickers.push(a)},removeTick:function(a){var b=this._tickers;a=b.indexOf(a);0<=a&&b.splice(a,
1)}}),y=Array.prototype,R=y.slice;y.indexOf=y.indexOf||function(a,b){b=b||0;var c=this.length,d;if(0==c||b>=c)return-1;0>b&&(b=c+b);for(d=b;d<c;d++)if(this[d]===a)return d;return-1};y=Function.prototype;y.bind=y.bind||function(a){function b(){var e=d.concat(R.call(arguments));return c.apply(this instanceof b?this:a,e)}var c=this,d=R.call(arguments,1),e=function(){};e.prototype=c.prototype;b.prototype=new e;return b};var t=function(){return n.create({constructor:function(a,b,c,d){this.target=a;this._pausedStartTime=
this._pausedTime=this._seekTime=this._startTime=0;this._reverseFlag=1;this._repeatCount=0;3==arguments.length&&(d=c,c=b,b=null);for(var e in d)this[e]=d[e];this.setProps(b,c);!d.duration&&d.time&&(this.duration=d.time||0,this.time=0)},target:null,duration:0,delay:0,paused:!1,loop:!1,reverse:!1,repeat:0,repeatDelay:0,ease:null,time:0,onStart:null,onUpdate:null,onComplete:null,setProps:function(a,b){var c=this.target,d=a||b,e=this._fromProps={},f=this._toProps={};a=a||c;b=b||c;for(var g in d)f[g]=b[g]||
0,c[g]=e[g]=a[g]||0;return this},start:function(){this._startTime=+new Date+this.delay;this._pausedTime=this._seekTime=0;this.paused=!1;t.add(this);return this},stop:function(){t.remove(this);return this},pause:function(){this.paused=!0;this._pausedStartTime=+new Date;return this},resume:function(){this.paused=!1;this._pausedStartTime&&(this._pausedTime+=+new Date-this._pausedStartTime);this._pausedStartTime=0;return this},seek:function(a,b){var c=+new Date;this._startTime=c;this._seekTime=a;this._pausedTime=
0;void 0!==b&&(this.paused=b);this._update(c,!0);t.add(this);return this},link:function(a){var b=a.delay,c=this._startTime;if("string"===typeof b)var d=0==b.indexOf("+"),e=0==b.indexOf("-"),b=d||e?Number(b.substr(1))*(d?1:-1):Number(b);a.delay=b;a._startTime=d||e?c+this.duration+b:c+b;this._next=a;t.remove(a);return this},_render:function(a){var b=this.target,c=this._fromProps,d;for(d in c)b[d]=c[d]+(this._toProps[d]-c[d])*a},_update:function(a,b){if(!this.paused||b){var c=a-this._startTime-this._pausedTime+
this._seekTime;if(!(0>c)){var d=c/this.duration,e=!1,f,d=0>=d?0:1<=d?1:this.ease?this.ease(d):d;this.reverse&&(0>this._reverseFlag&&(d=1-d),1E-7>d&&(0<this.repeat&&this._repeatCount++>=this.repeat||0==this.repeat&&!this.loop?e=!0:(this._startTime=+new Date,this._reverseFlag*=-1)));0==this.time&&(f=this.onStart)&&f.call(this,this);this.time=c;this._render(d);(f=this.onUpdate)&&f.call(this,d,this);1<=d&&(this.reverse?(this._startTime=+new Date,this._reverseFlag*=-1):this.loop||0<this.repeat&&this._repeatCount++<
this.repeat?this._startTime=+new Date+this.repeatDelay:e=!0);var g=this._next;if(g&&0>=g.time){var h=g._startTime;0<h&&h<=a?(g._render(d),g.time=c,t.add(g)):e&&(0>h||h>a)&&g.start()}if(e)return(f=this.onComplete)&&f.call(this,this),!0}}},Statics:{_tweens:[],tick:function(){var a=t._tweens,b,c,d=a.length;for(c=0;c<d;c++)(b=a[c])&&b._update(+new Date)&&(a.splice(c,1),c--);return t},add:function(a){var b=t._tweens;-1==b.indexOf(a)&&b.push(a);return t},remove:function(a){if(a instanceof Array){for(var b=
0,c=a.length;b<c;b++)t.remove(a[b]);return t}c=t._tweens;if(a instanceof t)b=c.indexOf(a),-1<b&&c.splice(b,1);else for(b=0;b<c.length;b++)c[b].target===a&&(c.splice(b,1),b--);return t},removeAll:function(){t._tweens.length=0;return t},fromTo:function(a,b,c,d){var e=a instanceof Array;a=e?a:[a];var f,g,h=d.stagger,k=[];for(g=0;g<a.length;g++)f=new t(a[g],b,c,d),h&&(f.delay=(d.delay||0)+(g*h||0)),f.start(),k.push(f);return e?k:f},to:function(a,b,c){return t.fromTo(a,null,b,c)},from:function(a,b,c){return t.fromTo(a,
b,null,c)}}})}(),y=function(){function a(a,b,c,d,e){a=a||{};b&&(a.EaseIn=b);c&&(a.EaseOut=c);d&&(a.EaseInOut=d);e&&(a.EaseNone=e);return a}var b=a(null,null,null,null,function(a){return a}),c=a(null,function(a){return a*a},function(a){return-a*(a-2)},function(a){return 1>(a*=2)?.5*a*a:-.5*(--a*(a-2)-1)}),d=a(null,function(a){return a*a*a},function(a){return--a*a*a+1},function(a){return 1>(a*=2)?.5*a*a*a:.5*((a-=2)*a*a+2)}),e=a(null,function(a){return a*a*a*a},function(a){return-(--a*a*a*a-1)},function(a){return 1>
(a*=2)?.5*a*a*a*a:-.5*((a-=2)*a*a*a-2)}),f=a(null,function(a){return a*a*a*a*a},function(a){return--a*a*a*a*a+1},function(a){return 1>(a*=2)?.5*a*a*a*a*a:.5*((a-=2)*a*a*a*a+2)}),g=Math,h=g.PI,k=.5*h,l=g.sin,m=g.cos,p=g.pow,q=g.sqrt,g=a(null,function(a){return-m(a*k)+1},function(a){return l(a*k)},function(a){return-.5*(m(h*a)-1)}),n=a(null,function(a){return 0==a?0:p(2,10*(a-1))},function(a){return 1==a?1:-p(2,-10*a)+1},function(a){return 0==a||1==a?a:1>(a*=2)?.5*p(2,10*(a-1)):.5*(-p(2,-10*(a-1))+
2)}),v=a(null,function(a){return-(q(1-a*a)-1)},function(a){return q(1- --a*a)},function(a){return 1>(a/=.5)?-.5*(q(1-a*a)-1):.5*(q(1-(a-=2)*a)+1)}),t=a({a:1,p:.4,s:.1,config:function(a,b){t.a=a;t.p=b;t.s=b/(2*h)*Math.asin(1/a)||0}},function(a){return-(t.a*p(2,10*--a)*l(2*(a-t.s)*h/t.p))},function(a){return t.a*p(2,-10*a)*l(2*(a-t.s)*h/t.p)+1},function(a){return 1>(a*=2)?-.5*t.a*p(2,10*--a)*l(2*(a-t.s)*h/t.p):t.a*p(2,-10*--a)*l(2*(a-t.s)*h/t.p)*.5+1}),u=a({o:1.70158,s:2.59491,config:function(a){u.o=
a;u.s=1.525*a}},function(a){return a*a*((u.o+1)*a-u.o)},function(a){return--a*a*((u.o+1)*a+u.o)+1},function(a){return 1>(a*=2)?.5*a*a*((u.s+1)*a-u.s):.5*((a-=2)*a*((u.s+1)*a+u.s)+2)}),w=a(null,function(a){return 1-w.EaseOut(1-a)},function(a){return.36364>(a/=1)?7.5625*a*a:.72727>a?7.5625*(a-=.54545)*a+.75:.90909>a?7.5625*(a-=.81818)*a+.9375:7.5625*(a-=.95455)*a+.984375},function(a){return.5>a?.5*w.EaseIn(2*a):.5*w.EaseOut(2*a-1)+.5});return{Linear:b,Quad:c,Cubic:d,Quart:e,Quint:f,Sine:g,Expo:n,Circ:v,
Elastic:t,Back:u,Bounce:w}}(),V=n.create({Mixes:B,constructor:function(a){this._source=[];this.add(a)},maxConnections:2,_source:null,_loaded:0,_connections:0,_currentIndex:-1,add:function(a){a&&(a=a instanceof Array?a:[a],this._source=this._source.concat(a));return this},get:function(a){if(a)for(var b=this._source,c=0;c<b.length;c++){var d=b[c];if(d.id===a||d.src===a)return d}return null},getContent:function(a){return(a=this.get(a))&&a.content},start:function(){this._loadNext();return this},_loadNext:function(){var a=
this,b=a._source,c=b.length;if(a._loaded>=c)a.fire("complete");else if(a._currentIndex<c-1&&a._connections<a.maxConnections){var d=++a._currentIndex,b=b[d],e=a._getLoader(b);if(e){var f=e.onLoad,g=e.onError;e.onLoad=function(b){e.onLoad=f;e.onError=g;b=f&&f.call(e,b)||b.target;a._onItemLoad(d,b)};e.onError=function(b){e.onLoad=f;(e.onError=g)&&g.call(e,b);a._onItemError(d,b)};a._connections++}a._loadNext();e&&e.load(b)}},_getLoader:function(a){var b=a.loader;if(b)return b;var c;if(!(c=a.type)){var d;
if(a=a.src.match(/\/?[^/]+\.(\w+)(\?\S+)?$/i))d=a[1].toLowerCase();c=d||null}switch(c){case "png":case "jpg":case "jpeg":case "gif":b=new S;break;case "js":case "jsonp":b=new K}return b},_onItemLoad:function(a,b){var c=this._source[a];c.loaded=!0;c.content=b;this._connections--;this._loaded++;this.fire("load",c);this._loadNext()},_onItemError:function(a,b){var c=this._source[a];c.error=b;this._connections--;this._loaded++;this.fire("error",c);this._loadNext()},getSize:function(a){for(var b=0,c=this._source,
d=0;d<c.length;d++)var e=c[d],b=b+((a?e.loaded&&e.size:e.size)||0);return b},getLoaded:function(){return this._loaded},getTotal:function(){return this._source.length}}),S=n.create({load:function(a){var b=this,c=new Image;a.crossOrigin&&(c.crossOrigin=a.crossOrigin);c.onload=function(){b.onLoad(c)};c.onerror=c.onabort=b.onError.bind(c);c.src=a.src+(a.noCache?(-1==a.src.indexOf("?")?"?":"&")+"t="+ +new Date:"")},onLoad:function(a){a=a||v.event;a.onload=a.onerror=a.onabort=null;return a},onError:function(a){var b=
a.target;b.onload=b.onerror=b.onabort=null;return a}}),K=n.create({load:function(a){var b=a.src,c="jsonp"==a.type;if(c){var d=a.callbackName||"callback",e=a.callback||"jsonp"+ ++K._count;v[e]||(v[e]=function(a){delete v[e]})}c&&(b+=(-1==b.indexOf("?")?"?":"&")+d+"="+e);a.noCache&&(b+=(-1==b.indexOf("?")?"?":"&")+"t="+ +new Date);c=document.createElement("script");c.type="text/javascript";c.async=!0;c.onload=this.onLoad.bind(this);c.onerror=this.onError.bind(this);c.src=b;a.id&&(c.id=a.id);document.getElementsByTagName("head")[0].appendChild(c)},
onLoad:function(a){a=a.target;a.onload=a.onerror=null;return a},onError:function(a){var b=a.target;b.onload=b.onerror=null;return a},Statics:{_count:0}}),L=n.create({Mixes:B,constructor:function(a){l.copy(this,a,!0);this._onAudioEvent=this._onAudioEvent.bind(this)},src:null,loop:!1,autoPlay:!1,loaded:!1,playing:!1,duration:0,volume:1,muted:!1,_element:null,load:function(){if(!this._element)try{var a=this._element=new Audio;a.addEventListener("canplaythrough",this._onAudioEvent,!1);a.addEventListener("ended",
this._onAudioEvent,!1);a.addEventListener("error",this._onAudioEvent,!1);a.src=this.src;a.volume=this.volume;a.load()}catch(b){a=this._element={},a.play=a.pause=function(){}}return this},_onAudioEvent:function(a){var b=a.type;switch(b){case "canplaythrough":a.target.removeEventListener(b,this._onAudioEvent);this.loaded=!0;this.duration=this._element.duration;this.fire("load");this.autoPlay&&this._doPlay();break;case "ended":this.playing=!1;this.fire("end");this.loop&&this._doPlay();break;case "error":this.fire("error")}},
_doPlay:function(){this.playing||(this._element.volume=this.muted?0:this.volume,this._element.play(),this.playing=!0)},play:function(){this.playing&&this.stop();this._element?this.loaded&&this._doPlay():(this.autoPlay=!0,this.load());return this},pause:function(){this.playing&&(this._element.pause(),this.playing=!1);return this},resume:function(){this.playing||this._doPlay();return this},stop:function(){this.playing&&(this._element.pause(),this._element.currentTime=0,this.playing=!1);return this},
setVolume:function(a){this.volume!=a&&(this.volume=a,this._element.volume=a);return this},setMute:function(a){this.muted!=a&&(this.muted=a,this._element.volume=a?0:this.volume);return this},Statics:{isSupported:null!==v.Audio}}),D=function(){var a=v.AudioContext||v.webkitAudioContext,b=a?new a:null;return n.create({Mixes:B,constructor:function(a){l.copy(this,a,!0);this._init()},src:null,loop:!1,autoPlay:!1,loaded:!1,playing:!1,duration:0,volume:1,muted:!1,_context:null,_gainNode:null,_buffer:null,
_audioNode:null,_startTime:0,_offset:0,_init:function(){this._context=b;this._gainNode=b.createGain?b.createGain():b.createGainNode();this._gainNode.connect(b.destination);this._onAudioEvent=this._onAudioEvent.bind(this);this._onDecodeComplete=this._onDecodeComplete.bind(this);this._onDecodeError=this._onDecodeError.bind(this)},load:function(){if(!this._buffer){var a=new XMLHttpRequest;a.src=this.src;a.open("GET",this.src,!0);a.responseType="arraybuffer";a.onload=this._onAudioEvent;a.onprogress=this._onAudioEvent;
a.onerror=this._onAudioEvent;a.send();this._buffer=!0}return this},_onAudioEvent:function(a){switch(a.type){case "load":a=a.target;a.onload=a.onprogress=a.onerror=null;this._context.decodeAudioData(a.response,this._onDecodeComplete,this._onDecodeError);break;case "ended":this.playing=!1;this.fire("end");this.loop&&this._doPlay();break;case "progress":this.fire(a);break;case "error":this.fire(a)}},_onDecodeComplete:function(a){this._buffer=a;this.loaded=!0;this.duration=a.duration;this.fire("load");
this.autoPlay&&this._doPlay()},_onDecodeError:function(){this.fire("error")},_doPlay:function(){this._clearAudioNode();var a=this._context.createBufferSource();a.start||(a.start=a.noteOn,a.stop=a.noteOff);a.buffer=this._buffer;a.onended=this._onAudioEvent;this._gainNode.gain.value=this.muted?0:this.volume;a.connect(this._gainNode);a.start(0,this._offset);this._audioNode=a;this._startTime=this._context.currentTime;this.playing=!0},_clearAudioNode:function(){var a=this._audioNode;a&&(a.onended=null,
a.disconnect(0),this._audioNode=null)},play:function(){this.playing&&this.stop();this.loaded?this._doPlay():this._buffer||(this.autoPlay=!0,this.load());return this},pause:function(){this.playing&&(this._audioNode.stop(0),this._offset+=this._context.currentTime-this._startTime,this.playing=!1);return this},resume:function(){this.playing||this._doPlay();return this},stop:function(){this.playing&&(this._audioNode.stop(0),this._audioNode.disconnect(),this._offset=0,this.playing=!1);return this},setVolume:function(a){this.volume!=
a&&(this.volume=a,this._gainNode.gain.value=a);return this},setMute:function(a){this.muted!=a&&(this.muted=a,this._gainNode.gain.value=a?0:this.volume);return this},Statics:{isSupported:null!=a,enabled:!1,enable:function(){if(!this.enabled&&b){var a=b.createBufferSource();a.buffer=b.createBuffer(1,1,22050);a.connect(b.destination);a.start?a.start(0,0,0):a.noteOn(0,0,0);return this.enabled=!0}return this.enabled}}})}(),W=n.create({constructor:function(a){this.height=this.width=0;this.bounds=this.deadzone=
this.target=null;this.scroll={x:0,y:0};l.copy(this,a)},tick:function(a){a=this.target;var b=this.scroll,c=this.bounds,d=this.deadzone;if(a){var e;d?(e=Math.min(Math.max(a.x-b.x,d[0]),d[0]+d[2]),d=Math.min(Math.max(a.y-b.y,d[1]),d[1]+d[3])):(e=.5*this.width,d=.5*this.height);b.x=a.x-e;b.y=a.y-d;c&&(b.x=Math.min(Math.max(b.x,c[0]),c[0]+c[2]),b.y=Math.min(Math.max(b.y,c[1]),c[0]+c[3]))}else b.x=0,b.y=0},follow:function(a,b){this.target=a;void 0!==b&&(this.deadzone=b);this.tick()}}),X=function(){function a(a,
b){return b?a+2*(Math.random()-.5)*b:a}for(var b="x y vx vy ax ay rotation rotationV scale scaleV alpha alphaV life".split(" "),c=[],d=0,e=b.length;d<e;d++){var f=b[d];c.push(f);c.push(f+"Var")}var g={x:0,y:0,vx:0,vy:0,ax:0,ay:0,scale:1,scaleV:0,alpha:1,alphaV:0,rotation:0,rotationV:0,life:1},h=[],b=n.create({Extends:A,constructor:function m(a){this.id=this.id||a.id||l.getUid("ParticleSystem");this.gy=this.gx=this.emitterY=this.emitterX=0;this.totalTime=Infinity;this.emitNum=10;this.emitNumVar=0;
this.emitTime=.2;this.emitTimeVar=0;this.particle={};m.superclass.constructor.call(this,a);this.container=a.container||this;this.reset(a)},Statics:{PROPS:c,PROPS_DEFAULT:g,diedParticles:h},reset:function(a){l.copy(this,a);this.particle.system=this;0>=this.totalTime&&(this.totalTime=Infinity)},onUpdate:function(b){b*=.001;this._isRun&&(this._totalRunTime+=b,this._currentRunTime+=b,this._currentRunTime>=this._emitTime&&(this._currentRunTime=0,this._emitTime=a(this.emitTime,this.emitTimeVar),this._emit()),
this._totalRunTime>=this.totalTime&&this.stop())},_emit:function(){for(var b=a(this.emitNum,this.emitNumVar)>>0,c=0;c<b;c++)this.container.addChild(k.create(this.particle))},start:function(){this.stop(!0);this._totalRunTime=this._currentRunTime=0;this._isRun=!0;this._emitTime=a(this.emitTime,this.emitTimeVar)},stop:function(a){this.isRun=!1;if(a)for(a=this.children.length-1;0<=a;a--)this.children[a].destroy()}}),k=n.create({Extends:w,constructor:function p(a){this.id=this.id||a.id||l.getUid("Particle");
p.superclass.constructor.call(this,a);this.init(a)},onUpdate:function(a){a*=.001;if(!this._died){var b=this.ay+this.system.gy;this.vx+=(this.ax+this.system.gx)*a;this.vy+=b*a;this.x+=this.vx*a;this.y+=this.vy*a;this.rotation+=this.rotationV;.1<this._time&&(this.alpha+=this.alphaV);this.scaleX=this.scaleY=this.scale+=this.scaleV;this._time+=a;(this._time>=this.life||0>this.alpha)&&this.destroy()}},setImage:function(a,b){this.drawable=this.drawable||new x;b=b||[0,0,a.width,a.height];this.width=b[2];
this.height=b[3];this.drawable.rect=b;this.drawable.image=a},destroy:function(){this.died=!0;this.removeFromParent();h.push(this)},init:function(b){this.system=b.system;this._died=!1;this._time=0;this.alpha=1;for(var d=0,e=c.length;d<e;d++){var f=c[d];this[f]=a(void 0===b[f]?g[f]:b[f],b[f+"Var"])}this.x+=this.system.emitterX;this.y+=this.system.emitterY;b.image&&(d=b.frame||[0,0,b.image.width,b.image.height],d[0].length&&(d=d[Math.random()*d.length>>0]),this.setImage(b.image,d),void 0!==b.pivotX&&
(this.pivotX=b.pivotX*d[2]),void 0!==b.pivotY&&(this.pivotY=b.pivotY*d[3]))},Statics:{create:function(a){if(0<h.length){var b=h.pop();b.init(a);return b}return new k(a)}}});return b}();l.Class=n;l.EventMixin=B;l.Renderer=F;l.CanvasRenderer=G;l.DOMRenderer=H;l.Matrix=N;l.Drawable=x;l.View=w;l.Container=A;l.Stage=O;l.Bitmap=I;l.Sprite=J;l.DOMElement=P;l.Graphics=Q;l.Text=E;l.BitmapText=C;l.Button=u;l.TextureAtlas=z;l.Ticker=U;l.drag={startDrag:function(a){function b(a){a.stopPropagation();e(a);f.off(l.event.POINTER_START,
b);f.fire("dragStart",h);f.__dragX=f.x-h.x;f.__dragY=f.y-h.y;g||(g=this.getStage());g.on(l.event.POINTER_MOVE,d);document.addEventListener(l.event.POINTER_END,c)}function c(a){document.removeEventListener(l.event.POINTER_END,c);g&&g.off(l.event.POINTER_MOVE,d);f.fire("dragEnd",h);f.on(l.event.POINTER_START,b)}function d(a){e(a);f.fire("dragMove",h);a=h.y+f.__dragY;f.x=Math.max(k,Math.min(m,h.x+f.__dragX));f.y=Math.max(n,Math.min(p,a))}function e(a){h.preX=h.x;h.preY=h.y;h.x=a.stageX;h.y=a.stageY}
var f=this,g;a=a||[-Infinity,-Infinity,Infinity,Infinity];var h={x:0,y:0,preX:0,preY:0},k=a[0],n=a[1],m=Infinity==a[2]?Infinity:k+a[2],p=Infinity==a[3]?Infinity:n+a[3];f.on(l.event.POINTER_START,b);f.stopDrag=function(){document.removeEventListener(l.event.POINTER_END,c);g&&g.off(l.event.POINTER_MOVE,d);f.off(l.event.POINTER_START,b)}},stopDrag:function(){}};l.Tween=t;l.Ease=y;l.LoadQueue=V;l.ImageLoader=S;l.ScriptLoader=K;l.HTMLAudio=L;l.WebAudio=D;l.WebSound={_audios:{},enableAudio:function(){D.isSupported&&
D.enable()},getAudio:function(a){a=this._normalizeSource(a);var b=this._audios[a.src];b||(D.isSupported?b=new D(a):L.isSupported&&(b=new L(a)),this._audios[a.src]=b);return b},removeAudio:function(a){a="string"===typeof a?a:a.src;var b=this._audios[a];b&&(b.stop(),b.off(),this._audios[a]=null,delete this._audios[a])},_normalizeSource:function(a){var b={};"string"===typeof a?b={src:a}:l.copy(b,a);return b}};l.Camera=W;l.ParticleSystem=X;v.Hilo=l;v.H||(v.H=l)})(window);